{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./apps/server/src/app/game/GameServer.ts","webpack:///./apps/server/src/app/server.ts","webpack:///./apps/server/src/main.ts","webpack:///./libs/common/src/index.ts","webpack:///./libs/common/src/lib/message/DebugMessage.ts","webpack:///./libs/common/src/lib/message/Message.ts","webpack:///./libs/common/src/lib/message/MessageFactory.ts","webpack:///./libs/common/src/lib/message/game/BoundryUpdateMessage.ts","webpack:///./libs/common/src/lib/message/game/ScoreboardUpdateMessage.ts","webpack:///./libs/common/src/lib/message/game/SpawnEnemyMessage.ts","webpack:///./libs/common/src/lib/message/game/equipment/ProjectileUpdateMessage.ts","webpack:///./libs/common/src/lib/message/game/equipment/ShipEquipmentMessage.ts","webpack:///./libs/common/src/lib/message/game/equipment/ShipEquipmentStartMessage.ts","webpack:///./libs/common/src/lib/message/game/equipment/ShipEquipmentStopMessage.ts","webpack:///./libs/common/src/lib/message/game/player/PlayerActionMessage.ts","webpack:///./libs/common/src/lib/message/game/player/PlayerJoinedMessage.ts","webpack:///./libs/common/src/lib/message/game/player/PlayerKilledMessage.ts","webpack:///./libs/common/src/lib/message/game/player/PlayerSelfKillMessage.ts","webpack:///./libs/common/src/lib/message/game/player/PlayerSkillUsedMessage.ts","webpack:///./libs/common/src/lib/message/game/player/PlayerUpdateMessage.ts","webpack:///./libs/common/src/lib/message/game/player/movement/PlayerMoveToMessage.ts","webpack:///./libs/common/src/lib/message/game/player/movement/PlayerOrbitMessage.ts","webpack:///./libs/common/src/lib/message/game/player/movement/PlayerStructureMessage.ts","webpack:///./libs/common/src/lib/message/game/projectile/ProjectileDestroyMessage.ts","webpack:///./libs/common/src/lib/message/game/projectile/ProjectileMessage.ts","webpack:///./libs/common/src/lib/message/game/projectile/ProjectileSpawnMessage.ts","webpack:///./libs/common/src/lib/message/game/projectile/ProjectileUpdateMessage.ts","webpack:///./libs/common/src/lib/message/game/structures/StructureDestroyMessage.ts","webpack:///./libs/common/src/lib/message/game/structures/StructureMessage.ts","webpack:///./libs/common/src/lib/message/game/structures/StructureSpawnMessage.ts","webpack:///./libs/common/src/lib/message/generic/PlayerMessage.ts","webpack:///./libs/common/src/lib/message/generic/PlayerTargetMessage.ts","webpack:///./libs/common/src/lib/message/login/LobbyQueryMessage.ts","webpack:///./libs/common/src/lib/message/login/PlayerLoginMessage.ts","webpack:///./libs/common/src/lib/model/Cannon.ts","webpack:///./libs/common/src/lib/model/Inventory.ts","webpack:///./libs/common/src/lib/model/Particle.ts","webpack:///./libs/common/src/lib/model/Projectile.ts","webpack:///./libs/common/src/lib/model/ScoreboardEntry.ts","webpack:///./libs/common/src/lib/model/ShipEquipment.ts","webpack:///./libs/common/src/lib/model/ShipFitting.ts","webpack:///./libs/common/src/lib/model/Skill.ts","webpack:///./libs/common/src/lib/model/Spaceship.ts","webpack:///./libs/common/src/lib/model/Structure.ts","webpack:///./libs/common/src/lib/physics/Physics.ts","webpack:///./libs/common/src/lib/util/CMath.ts","webpack:///./libs/common/src/lib/util/Factories.ts","webpack:///./libs/common/src/lib/util/Util.ts","webpack:///./libs/game-engine/src/index.ts","webpack:///./libs/game-engine/src/lib/CollisionDetection.ts","webpack:///./libs/game-engine/src/lib/collision/CollisionParticleParticle.ts","webpack:///./libs/game-engine/src/lib/collision/CollisionParticleWall.ts","webpack:///./libs/game-engine/src/lib/impl/ArcadePhysics.ts","webpack:///./libs/game-engine/src/lib/impl/HybridPhysics.ts","webpack:///./libs/game-engine/src/lib/impl/IPhysics.ts","webpack:///./libs/game-engine/src/lib/impl/RealPhysics.ts","webpack:///./libs/game-logic/src/index.ts","webpack:///./libs/game-logic/src/lib/EventManager.ts","webpack:///./libs/game-logic/src/lib/GameLogic.ts","webpack:///./libs/game-logic/src/lib/core/GarbageCollector.ts","webpack:///./libs/game-logic/src/lib/core/Scoreboard.ts","webpack:///./libs/game-logic/src/lib/core/Spawner.ts","webpack:///./libs/game-logic/src/lib/entity/equipment/EquipmentEntityBattery.ts","webpack:///./libs/game-logic/src/lib/entity/equipment/EquipmentEntityEmpty.ts","webpack:///./libs/game-logic/src/lib/entity/equipment/EquipmentEntityLaser.ts","webpack:///./libs/game-logic/src/lib/entity/equipment/EquipmentEntityMass.ts","webpack:///./libs/game-logic/src/lib/entity/equipment/EquipmentEntityNosferatu.ts","webpack:///./libs/game-logic/src/lib/entity/equipment/EquipmentEntityRepair.ts","webpack:///./libs/game-logic/src/lib/entity/equipment/EquipmentEntityRocketLauncher.ts","webpack:///./libs/game-logic/src/lib/entity/equipment/EquipmentEntitySpeedBooster.ts","webpack:///./libs/game-logic/src/lib/entity/equipment/EquipmentEntityWebber.ts","webpack:///./libs/game-logic/src/lib/entity/message/ServerDebugMessage.ts","webpack:///./libs/game-logic/src/lib/entity/message/ServerEnemySpawnMessage.ts","webpack:///./libs/game-logic/src/lib/entity/message/ServerLobbyQueryMessage.ts","webpack:///./libs/game-logic/src/lib/entity/message/ServerPlayerActionMessage.ts","webpack:///./libs/game-logic/src/lib/entity/message/ServerPlayerJoinedMessage.ts","webpack:///./libs/game-logic/src/lib/entity/message/ServerPlayerMoveToMessage.ts","webpack:///./libs/game-logic/src/lib/entity/message/ServerPlayerOrbitMessage.ts","webpack:///./libs/game-logic/src/lib/entity/message/ServerPlayerSelfKillMessage.ts","webpack:///./libs/game-logic/src/lib/entity/message/ServerPlayerStructureMessage.ts","webpack:///./libs/game-logic/src/lib/entity/movement/MovementGoalAlignTo.ts","webpack:///./libs/game-logic/src/lib/entity/movement/MovementGoalFreeFly.ts","webpack:///./libs/game-logic/src/lib/entity/movement/MovementGoalIdle.ts","webpack:///./libs/game-logic/src/lib/entity/movement/MovementGoalUseStructure.ts","webpack:///./libs/game-logic/src/lib/entity/projectiles/ProjectileRocket.ts","webpack:///./libs/game-logic/src/lib/entity/structures/StructureLootEntity.ts","webpack:///./libs/game-logic/src/lib/entity/structures/StructurePortalEntity.ts","webpack:///./libs/game-logic/src/lib/model/MovementGoal.ts","webpack:///./libs/game-logic/src/lib/model/ProjectileEntity.ts","webpack:///./libs/game-logic/src/lib/model/ServerMessageRecieved.ts","webpack:///./libs/game-logic/src/lib/model/ShipEquipmentEntity.ts","webpack:///./libs/game-logic/src/lib/model/ShipEquipmentTargetEntity.ts","webpack:///./libs/game-logic/src/lib/model/SpaceshipEntity.ts","webpack:///./libs/game-logic/src/lib/model/StructureEntity.ts","webpack:///./libs/game-logic/src/lib/serialize/EquipmentDeserializer.ts","webpack:///./libs/game-logic/src/lib/serialize/MessageDeserializer.ts","webpack:///external \"events\"","webpack:///external \"express\"","webpack:///external \"http\"","webpack:///external \"mathjs\"","webpack:///external \"node-gameloop\"","webpack:///external \"socket.io\"","webpack:///external \"tslib\""],"names":[],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import {Message} from \"@orbitweb/common\";\nimport {GameLogic} from \"@orbitweb/game-logic\";\nimport { Server, Socket } from \"socket.io\";\n\nconst gameloop = require('node-gameloop');\n\nexport class GameServer extends GameLogic {\n\n  public activeConnectionCount: number = 0;\n\n  private gameLoopId: number;\n\n  private tickRate: number = 1000 / 60;\n\n  constructor(private io: Server) {\n    super();\n\n    this.boundries.x1 = {x: -1200, y: -300};\n    this.boundries.x2 = {x: 600, y: 600};\n\n  }\n\n\n  public stop() {\n    console.log(\"Server stoped:\", this.gameLoopId);\n    gameloop.clearGameLoop(this.gameLoopId);\n    this.gameLoopId = undefined;\n\n  }\n\n  public start() {\n    if (this.gameLoopId === undefined) {\n      this.gameLoopId = gameloop.setGameLoop((delta) => {\n        this.serverLoop(delta);\n      }, this.tickRate);\n      console.log(\"Server started: \", this.gameLoopId);\n    }\n\n    if (this.players.length === 0) {\n      this.spawnDefaultEnemy();\n      console.log(\"Enemy spawned\");\n    }\n\n  }\n\n  public checkOnlineState(): boolean {\n    return this.hasActivePlayer() || this.activeConnectionCount > 0;\n  }\n\n  public hasActivePlayer(): boolean {\n    return this.players.filter((player) => !player.isNPC).length > 0;\n  }\n\n  public serverLoop(delta: number) {\n    if (this.checkOnlineState() === false) {\n      this.stop();\n    }\n\n    this.gameLoop(delta);\n    this.gc();\n  }\n\n  public onMessage(msg: Message, broadCast, singleCast) {\n    super.onMessage(msg, broadCast, singleCast);\n  }\n\n  public send(msg) {\n    this.io.emit(\"message\", msg);\n  }\n\n}\n","import {createServer } from 'http';\nimport * as express from 'express';\nimport { Server, Socket } from \"socket.io\";\n\n\nimport {GameServer} from \"./game/GameServer\";\nimport {Message} from \"@orbitweb/common\";\n\nexport class ChatServer {\n  public static readonly PORT:number = 8000;\n  private app: express.Application;\n  \n  private io: Server;\n  private port: string | number;\n\n  private gameServer: GameServer;\n\n\n  private httpServer = createServer();\n\n  constructor() {\n    this.config();\n  \n    this.sockets();\n    this.listen();\n\n    this.httpServer.listen(this.port);\n    console.log('Running server on port %s', this.port);\n  }\n\n  private createApp(): void {\n    this.app = express();\n  }\n\n  \n\n  private config(): void {\n    this.port = process.env.PORT || ChatServer.PORT;\n  }\n\n  private sockets(): void {\n    this.io = new Server(this.httpServer, { cors: {\n      origin: \"http://localhost:4200\",\n      methods: [\"GET\", \"POST\"]\n    }});\n    this.gameServer = new GameServer(this.io);\n  }\n\n  private listen(): void {\n      this.io.on('connection', (socket: Socket) => {\n      console.log('Connected client on port %s.', this.port);\n      this.gameServer.activeConnectionCount++;\n      this.gameServer.start();\n\n\n      socket.on('message', (m: Message) => {\n        this.gameServer.onMessage(m, this.io, socket);\n      });\n\n      socket.on('disconnect', () => {\n        this.gameServer.activeConnectionCount--;\n      });\n    });\n\n  }\n\n  public getApp(): express.Application {\n    return this.app;\n  }\n}\n","import {ChatServer} from './app/server';\n\nlet app = new ChatServer().getApp();\nexport { app };\n","// models\nexport * from './lib/model/Cannon';\nexport * from './lib/model/Inventory';\nexport * from './lib/model/Particle';\nexport * from './lib/model/Projectile';\nexport * from './lib/model/ScoreboardEntry';\nexport * from './lib/model/ShipEquipment';\nexport * from './lib/model/ShipFitting';\nexport * from './lib/model/Skill';\nexport * from './lib/model/Spaceship';\nexport * from './lib/model/Structure';\n//export * from './lib/model/TargetSkill';\nexport * from './lib/model/TimedAbility';\n\n// util\nexport * from './lib/util/Factories';\nexport * from './lib/util/VectorInterface';\nexport * from './lib/util/CMath'\nexport * from './lib/util/Util'\nexport * from './lib/physics/Physics'\n\n// messages\nexport * from './lib/message/game/BoundryUpdateMessage';\nexport * from './lib/message/game/ScoreboardUpdateMessage';\nexport * from './lib/message/game/SpawnEnemyMessage';\n\nexport * from './lib/message/game/equipment/ProjectileUpdateMessage';\nexport * from './lib/message/game/equipment/ShipEquipmentMessage';\nexport * from './lib/message/game/equipment/ShipEquipmentStartMessage';\nexport * from './lib/message/game/equipment/ShipEquipmentStopMessage';\n\nexport * from './lib/message/game/player/movement/PlayerMoveToMessage';\nexport * from './lib/message/game/player/movement/PlayerOrbitMessage';\nexport * from './lib/message/game/player/movement/PlayerStructureMessage';\n\nexport * from './lib/message/game/player/PlayerActionMessage';\nexport * from './lib/message/game/player/PlayerJoinedMessage';\nexport * from './lib/message/game/player/PlayerKilledMessage';\nexport * from './lib/message/game/player/PlayerSelfKillMessage';\nexport * from './lib/message/game/player/PlayerSkillUsedMessage';\nexport * from './lib/message/game/player/PlayerUpdateMessage';\n\nexport * from './lib/message/game/projectile/ProjectileDestroyMessage';\nexport * from './lib/message/game/projectile/ProjectileMessage';\nexport * from './lib/message/game/projectile/ProjectileSpawnMessage';\nexport * from './lib/message/game/projectile/ProjectileUpdateMessage';\n\nexport * from './lib/message/game/structures/StructureDestroyMessage';\nexport * from './lib/message/game/structures/StructureMessage';\nexport * from './lib/message/game/structures/StructureSpawnMessage';\n\nexport * from './lib/message/generic/PlayerMessage';\nexport * from './lib/message/generic/PlayerTargetMessage';\n\nexport * from './lib/message/login/LobbyQueryMessage';\nexport * from './lib/message/login/PlayerLoginMessage';\n\nexport * from './lib/message/DebugMessage';\nexport * from './lib/message/Message';\nexport * from './lib/message/MessageFactory';\n\n\n","import {Message} from \"./Message\";\n\nexport class DebugMessage extends Message{\n  constructor() {\n    super();\n    this.type = \"debugMessage\";\n  }\n}\n","export class Message {\n  public type: string;\n}\n","import {Message} from \"./Message\";\n\nexport class MessageFactory {\n  public static create(message: Message): Message {\n    return null;\n  }\n}\n","import {Message} from \"../Message\";\nimport {Rectangle} from \"../../util/VectorInterface\";\n\nexport class BoundryUpdateMessage extends Message {\n  constructor(public boundry: Rectangle) {\n    super();\n    this.type = \"boundryUpdateMessage\";\n  }\n}\n","import {ScoreboardEntry} from \"../../model/ScoreboardEntry\";\nimport {Message} from \"../Message\";\n\nexport class ScoreboardUpdateMessage extends Message {\n  constructor(public entries: ScoreboardEntry[]) {\n    super();\n    this.type = \"scoreboardUpdateMessage\";\n  }\n}\n","import {Message} from \"../Message\";\nimport {PlayerJoinedMessage} from \"./player/PlayerJoinedMessage\";\nimport {Spaceship} from \"../../model/Spaceship\";\n\n\nexport class EnemySpawnMessage extends Message {\n\n  constructor(private name: string) {\n    super();\n    //this.fitting.fitting = spaceship.fitting.fitting;\n\n    this.type = \"enemyJoinedMessage\";\n  }\n}\n","import {ShipEquipmentMessage} from \"./ShipEquipmentMessage\";\n\nexport class ShipEquipmentUpdateMessage extends ShipEquipmentMessage {\n\n  public x: number;\n  public y: number;\n\n  public speedX: number;\n  public speedY: number;\n\n  public rotation: number;\n/*\n  constructor(source: string, equipment: ShipEquipment) {\n    super(source, equipment);\n\n    this.type = \"shipEquipmentUpdateMessage\";\n  }\n\n */\n}\n","import {PlayerMessage} from \"../../generic/PlayerMessage\";\n\nexport class ShipEquipmentMessage extends PlayerMessage{\n  constructor(public id: string, public index: number, public active: boolean) {\n    super(id);\n    this.type = \"shipEquipmentMessage\";\n  }\n}\n","import {ShipEquipmentMessage} from \"./ShipEquipmentMessage\";\n\nexport class ShipEquipmentStartMessage extends ShipEquipmentMessage {\n\n\n/*\n  constructor(source: string, equipment: ShipEquipment) {\n    super(source, equipment);\n\n    this.type = \"shipEquipmentStartMessage\";\n  }\n\n */\n}\n","import {ShipEquipmentMessage} from \"./ShipEquipmentMessage\";\n\nexport class ShipEquipmentStopMessage extends ShipEquipmentMessage {\n/*\n  constructor(source: string, equipment: ShipEquipment) {\n    super(source, equipment);\n\n    this.type = \"shipEquipmentStopMessage\";\n  }\n\n */\n}\n","import {PlayerMessage} from \"../../generic/PlayerMessage\";\n\nexport class PlayerActionMessage extends PlayerMessage {\n  constructor(player: string, public skillIndex: number) {\n    super(player);\n    this.type = \"playerActionMessage\";\n  }\n}\n","import {Spaceship} from \"../../../model/Spaceship\";\nimport {PlayerUpdateMessage} from \"./PlayerUpdateMessage\";\n\nexport class PlayerJoinedMessage extends PlayerUpdateMessage {\n\n  constructor(spaceship: Spaceship) {\n    super(spaceship);\n    this.fitting.fitting = spaceship.fitting.fitting;\n    this.type = \"playerJoinedMessage\";\n  }\n}\n","import {Spaceship} from \"../../../model/Spaceship\";\nimport {PlayerMessage} from \"../../generic/PlayerMessage\";\n\nexport class PlayerKilledMessage extends PlayerMessage {\n  constructor(spaceship: Spaceship, public killer: string) {\n    super(spaceship.id);\n    this.type = \"playerKilledMessage\";\n  }\n}\n","import {PlayerMessage} from \"../../generic/PlayerMessage\";\n\nexport class PlayerSelfKillMessage extends PlayerMessage {\n\n  constructor(name: string) {\n    super(name);\n    this.type = \"playerSelfKillMessage\";\n  }\n}\n","import {PlayerTargetMessage} from \"../../generic/PlayerTargetMessage\";\n\nexport class PlayerTargetSkillUsedMessage extends PlayerTargetMessage {\n  constructor(player: string, target: string, public skillId: string) {\n    super(player, target);\n    this.type = \"playerTargetSkillUsedMessage\";\n  }\n}\n","import {Spaceship} from \"../../../model/Spaceship\";\nimport {PlayerMessage} from \"../../generic/PlayerMessage\";\nimport {ShipFitting} from \"../../../model/ShipFitting\";\n\nexport class PlayerUpdateMessage extends PlayerMessage {\n  public color: string;\n  public x;\n  public y;\n\n\n  public speedX: number;\n  public speedY: number;\n  public rotation: number;\n\n  public fitting: ShipFitting;\n\n  public target: string;\n  public health: number;\n  public power: number;\n\n  public activationProgress: number = 0;\n\n  constructor(spaceship: Spaceship) {\n    super(spaceship.id);\n    this.color = spaceship.color;\n    this.x = spaceship.position.x;\n    this.y = spaceship.position.y;\n\n    this.speedX = spaceship.speed.x;\n    this.speedY = spaceship.speed.y;\n    this.rotation = spaceship.rotation;\n    this.fitting = new ShipFitting();\n    this.fitting.fitting = spaceship.fitting.fitting.map( (fit) => {\n      return <any> {\n        name: fit.name,\n        state: fit.state,\n        remainingTime: fit.remainingTime\n      }\n    });\n\n    this.health = spaceship.health;\n    this.power = spaceship.power;\n    this.target = spaceship.targetPlayer !== undefined ? spaceship.targetPlayer.id : undefined;\n\n    this.activationProgress = spaceship.activationProgress;\n\n    this.type = \"playerUpdateMessage\";\n  }\n}\n","import {PlayerMessage} from \"../../../generic/PlayerMessage\";\nimport {Vector2} from \"../../../../util/VectorInterface\";\n\nexport class PlayerMoveToMessage extends PlayerMessage {\n  constructor(player: string, public position: Vector2) {\n    super(player);\n    this.type = \"playerMoveToMessage\";\n  }\n}\n","import {PlayerMessage} from \"../../../generic/PlayerMessage\";\n\nexport class PlayerOrbitMessage extends PlayerMessage {\n  constructor(player: string, public target: string) {\n    super(player);\n    this.type = \"playerOrbitMessage\";\n  }\n}\n","import {PlayerMessage} from \"../../../generic/PlayerMessage\";\n\nexport class PlayerStructureMessage extends PlayerMessage {\n  constructor(player: string, public structureId: string) {\n    super(player);\n    this.type = \"playerStructureMessage\";\n  }\n}\n","import {ProjectileMessage} from \"./ProjectileMessage\";\nimport {Projectile} from \"../../../model/Projectile\";\n\nexport class ProjectileDestroyMessage extends ProjectileMessage {\n\n\n  constructor(projectile: Projectile) {\n    super(projectile.id);\n\n    this.type = \"projectileDestroyMessage\";\n  }\n}\n","import {Message} from \"../../Message\";\n\nexport class ProjectileMessage extends Message{\n  constructor(public id: string) {\n    super();\n    this.type = \"projectileMessage\";\n  }\n}\n","import {ProjectileMessage} from \"./ProjectileMessage\";\nimport {Projectile} from \"../../../model/Projectile\";\n\nexport class ProjectileSpawnMessage extends ProjectileMessage {\n\n\n  public projType: string;\n  public x: number;\n  public y: number;\n\n  constructor(projectile: Projectile, public source: string, public target: string) {\n    super(projectile.id);\n\n    this.x = projectile.position.x;\n    this.y = projectile.position.y;\n\n    this.projType = projectile.type;\n    this.type = \"projectileSpawnMessage\";\n  }\n}\n","import {ProjectileMessage} from \"./ProjectileMessage\";\nimport {Projectile} from \"../../../model/Projectile\";\n\nexport class ProjectileUpdateMessage extends ProjectileMessage {\n\n  public x: number;\n  public y: number;\n\n  public speedX: number;\n  public speedY: number;\n\n  public rotation: number;\n\n  constructor(projectile: Projectile) {\n    super(projectile.id);\n\n    this.x = projectile.position.x;\n    this.y = projectile.position.y;\n\n    this.speedX = projectile.speed.x;\n    this.speedY = projectile.speed.y;\n\n    this.rotation = projectile.rotation;\n\n    this.type = \"projectileUpdateMessage\";\n  }\n}\n","import {StructureMessage} from \"./StructureMessage\";\nimport {Structure} from \"../../../model/Structure\";\n\nexport class StructureDestroyMessage extends StructureMessage {\n\n\n  public structureType: string;\n\n  constructor(structure: Structure) {\n    super(structure.id);\n\n    this.type = \"structureDestroyMessage\";\n  }\n}\n","import {Message} from \"../../Message\";\n\nexport class StructureMessage extends Message{\n  constructor(public id: string) {\n    super();\n    this.type = \"structureMessage\";\n  }\n}\n","import {StructureMessage} from \"./StructureMessage\";\nimport {Structure} from \"../../../model/Structure\";\n\nexport class StructureSpawnMessage extends StructureMessage {\n\n  public x: number;\n  public y: number;\n  public structureType: string;\n  public activationRange: number;\n  public activationDuration: number;\n  public info: string;\n\n  constructor(structure: Structure) {\n    super(structure.id);\n\n    this.x = structure.position.x;\n    this.y = structure.position.y;\n\n    this.activationDuration = structure.activationDuration;\n    this.activationRange = structure.activationRange;\n\n    this.info = structure.info;\n\n    this.structureType = structure.type;\n    this.type = \"structureSpawnMessage\";\n  }\n}\n","import {Message} from \"../Message\";\n\nexport class PlayerMessage extends Message{\n  constructor(public source: string) {\n    super();\n    this.type = \"playerMessage\";\n  }\n}\n","import {PlayerMessage} from \"./PlayerMessage\";\n\nexport class PlayerTargetMessage extends PlayerMessage {\n\n\n  constructor(source: string, public target: string) {\n    super(source);\n    this.type = \"playerTargetMessage\";\n  }\n}\n","import {Message} from \"../Message\";\n\nexport class LobbyQueryMessage extends Message {\n  constructor() {\n    super();\n    this.type = \"lobbyQueryMessage\";\n  }\n}\n","import {PlayerMessage} from \"../generic/PlayerMessage\";\nimport {ShipFitting} from \"../../model/ShipFitting\";\n\n\nexport class PlayerLoginMessage extends PlayerMessage {\n  constructor(public source: string, public fitting?: ShipFitting) {\n    super(source);\n    this.type = \"playerLoginMessage\";\n\n  }\n}\n","import {Spaceship} from \"./Spaceship\";\n\nexport class Cannon {\n\n  public parent: Spaceship;\n\n  public get targetPlayer(): Spaceship {\n    return this.parent.targetPlayer;\n  }\n\n  public rotation: number = 0;\n\n  public maxOmega: number = 0.3;\n\n  protected remainingCooldown: number = 0;\n\n  public cooldownDuration: number = 5;\n\n  public range: number = 200;\n\n  public damage: number = 10;\n\n  public maxAimAngle = 0.01;\n\n  constructor(spaceship: Spaceship) {\n    this.parent = spaceship;\n  }\n}\n","export class Inventory {\n  public amount = 0;\n\n  constructor(public name: string) {\n  }\n}\n","\n\nexport class Particle {\n\n  public position: { x: number, y: number;};\n  public speed: { x: number, y: number;};\n  public accel: { x: number, y: number;};\n\n  public rotation: number = 0;\n  public omega: number = 0;\n\n  public mass: number = 1;\n  public radius: number = 10;\n\n  constructor() {\n    this.position = { x: 0, y: 0};\n    this.speed = { x: 0, y: 0};\n    this.accel = { x: 0, y: 0};\n  }\n}\n","import {Particle} from \"./Particle\";\nimport {TimedAbility} from \"./TimedAbility\";\n\nexport class Projectile extends Particle implements TimedAbility {\n\n  public duration: number;\n  public timeToLife: number;\n\n  public type: string;\n\n  constructor(public id: string,\n              public color) {\n    super();\n    this.timeToLife = 1;\n    this.type = \"projectile\";\n  }\n\n  public onInit() {\n\n  }\n\n  public iterate(delta: number) {\n    this.timeToLife -= delta;\n  }\n\n  public onDestroy() {\n\n  }\n\n\n}\n","export class ScoreboardEntry {\n  constructor(public name, public kills: number){\n\n\n  }\n\n}\n","import {IAction} from \"../action/IAction\";\nimport {Spaceship} from \"./Spaceship\";\n\n\nexport interface ShipEquipmentState {\n  active: boolean,\n  pendingState: boolean,\n  rotation: number,\n\n}\n\nexport class ShipEquipment {\n  public state: ShipEquipmentState = {\n    active: false,\n    pendingState: false,\n    rotation: 0\n  };\n\n  public remainingTime;\n\n  constructor(public name: string,\n              public tier: number,\n              public cpuCost: number,\n              public powerCost: number,\n              public cycleTime: number,\n              public passive: boolean,\n              public action: IAction\n              ) {\n    this.remainingTime = 0.0;\n  }\n\n  public onInit(parent: Spaceship) {\n\n  }\n\n  public iterate(parent: Spaceship, delta: number) {\n    this.remainingTime -= delta;\n    this.remainingTime = this.remainingTime >= 0 ? this.remainingTime : 0;\n  }\n\n  public onDestroy(parent: Spaceship) {\n\n  }\n}\n","import {ShipEquipment} from \"./ShipEquipment\";\n\nexport class ShipFitting {\n  constructor() {\n  }\n  public fitting: ShipEquipment[] = [];\n}\n","\nexport class Skill{\n  public id;\n\n  public name: string;\n  protected animationDuration = 4.0;\n  public remainingTime = 4.0;\n\n  public onInit() {\n\n  }\n\n  public iterate(delta: number) {\n      this.remainingTime -= delta;\n  }\n\n  public onDestroy() {\n\n  }\n}\n","import {Particle} from \"./Particle\";\nimport {Vector2} from \"../util/VectorInterface\";\nimport {ShipFitting} from \"./ShipFitting\";\nimport {Structure} from \"./Structure\";\nimport {Inventory} from \"./Inventory\";\n\n\nexport class Spaceship extends Particle {\n\n  public id;\n\n  public maxSpeed: number = 50;\n\n  public health = 100;\n  public maxHealth:number = 150;\n\n  public color: string = \"#00FF00\";\n\n  public curSpeedDEP: number = 0;\n\n  public fitting: ShipFitting = new ShipFitting();\n\n  public inventory: Inventory[] = [];\n\n  public timeToMaxSpeed = 2;\n\n  public power: number = 100;\n\n  public shipSize: number = 7;\n\n  public speedInput: number = 1;\n\n  public maxOmega: number = 1 * Math.PI;\n\n  public cpuCapacity: number = 200;\n\n  public activationProgress: number = 0;\n\n  public energyRechargeRate: number = 1.0;\n  public energyCapacity: number = 150;\n\n  public timestampLastActionMs: number;\n  public isNPC: boolean = false;\n  public maxIdleTimeMs: number = 30 * 60 * 1000;\n\n  private _targetPlayer: Spaceship;\n\n  public set targetPlayer(target: Spaceship) {\n    this._targetPlayer = target;\n  };\n\n  public get targetPlayer(): Spaceship {\n    return this._targetPlayer;\n  }\n\n  public targetPosition: Vector2;\n\n  public orbitRadius = 100;\n\n  public actionOrbitTarget: boolean = false;\n  public actionKeepAtRange: boolean = false;\n  public actionUseStructure: boolean = false;\n\n  public targetStructure: Structure;\n\n  public get acceleration(): number {\n    return this.maxSpeed / (this.timeToMaxSpeed * this.mass);\n  }\n\n\n  constructor(id, color) {\n    super();\n    this.id = id;\n    this.color = color;\n  }\n\n  public removeTarget() {\n    this.targetPlayer = undefined;\n    this.actionOrbitTarget = false;\n  }\n\n\n  public onInit() {\n\n  }\n\n  public onDestroy() {\n\n  }\n}\n","import {Vector2} from \"../util/VectorInterface\";\n\nexport class Structure {\n  public id: string;\n  public position: Vector2;\n  public type: string;\n  public activationDuration: number = 4;\n  public activationRange: number = 300;\n\n  public timestampSpawnMs: number;\n  public maxIdleTimeMs: number = 60 * 30 * 1000;\n  public isStatic: boolean = false;\n\n  public info: string;\n\n  constructor(x: number, y: number) {\n    this.position = {\n      x: x,\n      y: y\n    };\n    this.type = \"structure\";\n  }\n}\n","import {Particle} from \"../model/Particle\";\n\n\nexport class Physics {\n\n\n\n  constructor() {\n\n  }\n\n  public static iterate(particle: Particle, delta: number) {\n    particle.position.x += particle.speed.x * delta;\n    particle.position.y += particle.speed.y * delta;\n\n    particle.speed.x += particle.accel.x * delta;\n    particle.speed.y += particle.accel.y * delta;\n\n    particle.rotation += particle.omega * delta;\n\n    particle.rotation = particle.rotation % (2 * Math.PI);\n\n    particle.omega = 0;\n\n    particle.accel.x = 0;\n    particle.accel.y = 0;\n  }\n\n  public static renderParticle() {\n\n  }\n\n\n\n}\n","import * as math from 'mathjs';\n\nimport {Tangents, Vector2, Vector3} from \"@orbitweb/common\";\nimport {Particle} from \"@orbitweb/common\";\n\n\nexport class CMath {\n\n  constructor() {\n\n  }\n\n  public static normalize3(vec: Vector3): Vector3 {\n    const res:number = <number> math.norm( [vec.x, vec.y, vec.z]);\n    return { x: vec.x / res, y: vec.y / res, z: vec.z / res};\n  }\n\n  public static normalize(vec: Vector2): Vector2 {\n    const res:number = <number> math.norm( [vec.x, vec.y]);\n    return { x: vec.x / res, y: vec.y / res};\n  }\n\n  public static clamp(vec: Vector2) {\n\n  }\n\n  public static rotate(vec: Vector2, a: number): Vector2 {\n    //const angle = a / 180 * math.pi;\n    const angle = a;\n\n    return {\n      x: math.cos(angle) * vec.x - math.sin(angle) * vec.y,\n      y: math.sin(angle) * vec.x + math.cos(angle) * vec.y\n    }\n  }\n\n  public static angle(tDir: Vector2, orient: Vector2): number {\n/*\n    const dotProduct = math.dot( [tDir.x, tDir.y], [orient.x, orient.y])\n\n    return math.acos(dotProduct / ( math.norm( [tDir.x, tDir.y]) * math.norm( [orient.x, orient.y])));\n\n*/\n\n    //const a = A.x - C.x;\n    //float b = A.y - C.y;\n    //float c = B.x - C.x;\n    //float d = B.y - C.y;\n/*\n    const a = tDir.x;\n    const b = tDir.y;\n    const c = orient.x;\n    const d = orient.y;\n\n    const angleA = math.atan2(b, a);\n    const angleB = math.atan2(d, c);\n    const rotationAngleRad = angleA - angleB;\n    return rotationAngleRad;\n*/\n\n    let angle = math.acos(this.dot(tDir, orient));\n\n\n    const cross = this.cross(tDir, orient);\n    /*\n    if (dotProduct(Vn, cross) < 0) { // Or > 0\n      angle = -angle;\n    }\n\n\n\n    */\n\n    if (this.dot3( {x: 0, y: 0, z: 1}, cross) > 0) {\n      angle = -angle;\n    }\n\n    if ( angle.hasOwnProperty(\"re\")) {\n      //angle = angle.re;\n      console.error(\"winkel ist komplex!\", angle);\n      angle = 0;\n    }\n\n\n    if (isNaN(angle))\n      return 0;\n\n    return angle;\n\n  }\n\n  public static degree(tDir: Vector2, orient: Vector2): number {\n\n        const dotProduct: number = math.dot( [tDir.x, tDir.y], [orient.x, orient.y])\n\n        const l_tDir: number = <number> math.norm( [tDir.x, tDir.y]);\n        const l_orient: number = <number> math.norm( [orient.x, orient.y]);\n\n        return math.acos(dotProduct / ( l_tDir * l_orient));\n\n\n  }\n\n  public static constructTangent(center: Vector2, radius: number, point: Vector2): Tangents {\n\n    const b = math.sqrt((point.x - center.x) * (point.x - center.x) + (point.y - center.y) * (point.y - center.y));\n\n    if ( radius > b) {\n      // Inside circle\n      return {\n        isInside: true\n      }\n    } else if ( radius === b) {\n      // on tangent\n      return {\n        isOnTangent: true\n      }\n    } else {\n\n      const th = math.acos(radius / b); //  # angle theta\n      const d = math.atan2(point.y - center.y, point.x - center.x); //  # direction angle of point P from C\n      const d1 = d + th; //  # direction angle of point T1 from C\n      const d2 = d - th; // # direction angle of point T2 from C\n\n      const T1x = center.x + radius * math.cos(d1);\n      const T1y = center.y + radius * math.sin(d1);\n      const T2x = center.x + radius * math.cos(d2);\n      const T2y = center.y + radius * math.sin(d2);\n\n      return {\n        tangents: {\n          t1: { x: T1x, y: T1y},\n          t2: { x: T2x, y: T2y},\n        }\n      };\n    }\n  }\n\n  public static scale(v1: Vector2, scale: number): Vector2 {\n    return {\n      x: v1.x * scale,\n      y: v1.y * scale\n    }\n  }\n\n  public static add(v1: Vector2, v2: Vector2): Vector2 {\n    return {\n      x: v1.x + v2.x,\n      y: v1.y + v2.y\n    }\n  }\n\n  public static sub(v1: Vector2, v2: Vector2): Vector2 {\n    return {\n      x: v1.x - v2.x,\n      y: v1.y - v2.y\n    }\n  }\n\n  public static len(v: Vector2): number {\n    return <number> math.norm( [v.x, v.y]);\n  }\n\n  public static dot(v1: Vector2, v2: Vector2): number {\n    const v1n = this.normalize(v1);\n    const v2n = this.normalize(v2);\n    const res = math.dot( [v1n.x, v1n.y], [v2n.x, v2n.y]);\n\n    return res;\n  }\n\n  public static dot3(v1: Vector3, v2: Vector3): number {\n    const v1n = this.normalize(v1);\n    const v2n = this.normalize(v2);\n    const res = math.dot([v1.x, v1.y, v1.z], [v2.x, v2.y, v2.z]);\n\n    return res;\n  }\n\n  public static cross3(v1: Vector3, v2: Vector3): Vector3 {\n    const v1n = this.normalize3(v1);\n    const v2n = this.normalize3(v2);\n\n    const res = math.cross( [v1n.x, v1n.y, v1n.z], [v2n.x, v2n.y, v2.z] );\n\n    return {\n      x: res[0],\n      y: res[1],\n      z: res[2]\n    };\n  }\n\n  public static cross(v1: Vector2, v2: Vector2): Vector3 {\n    const v1n = this.normalize(v1);\n    const v2n = this.normalize(v2);\n\n    const res = math.cross( [v1n.x, v1n.y, 0], [v2n.x, v2n.y, 0] );\n\n    return {\n      x: res[0],\n      y: res[1],\n      z: res[2]\n    };\n  }\n\n  public static isInsideCircle(center: Vector2, point: Vector2, radius:number): boolean {\n\n    const v = CMath.sub(point, center);\n\n    const distance: number = <number> math.norm( [v.x, v.y] );\n\n    return distance < radius;\n\n\n  }\n\n  public static getAngularVelocity(particle: Particle, target: Vector2): number {\n\n\n\n    const r = {\n      x: particle.position.x - target.x,\n      y: particle.position.y - target.y\n    };\n\n    // TODO: winkel nur zwischen 0 und 180 grad\n    const alpha = CMath.angle(r, particle.speed);\n\n    const v_norm: number = <number> math.norm( [ particle.speed.x, particle.speed.y ]);\n    const r_norm: number = <number> math.norm( [ r.x, r.y ]);\n    //console.log(v_norm);\n\n    //console.log(alpha * 180 / math.pi);\n    //console.log(particle.speed);\n\n    const omega: number = v_norm * math.sin(alpha) / r_norm;\n\n    return math.abs(omega);\n  }\n\n\n\n\n\n}\n","import {PlayerJoinedMessage} from \"../message/game/player/PlayerJoinedMessage\";\nimport {Spaceship} from \"../model/Spaceship\";\n\nexport class Factories {\n  public static createSpaceship( msg: PlayerJoinedMessage): Spaceship {\n    return new Spaceship(msg.source, msg.color);\n  }\n}\n","export function getRandomColor(): string {\n  return '#'+Math.random().toString(16).substr(2,6);\n}\n","export * from './lib/CollisionDetection'\n\nexport * from './lib/impl/IPhysics'\nexport * from './lib/impl/ArcadePhysics'\nexport * from './lib/impl/HybridPhysics'\nexport * from './lib/impl/RealPhysics'","import {Particle} from \"@orbitweb/common\";\nimport {Structure} from \"@orbitweb/common\";\nimport {Rectangle} from \"@orbitweb/common\";\nimport {CollisionParticleWall} from \"./collision/CollisionParticleWall\";\nimport {CMath} from \"@orbitweb/common\";\nimport {CollisionParticleParticle} from \"./collision/CollisionParticleParticle\";\n\nexport class CollisionDetection {\n\n  public static detect(particles: Particle[], structures: Structure[], boundries: Rectangle) {\n    particles.forEach( (particle) => {\n      this.checkBoundries(particle, boundries);\n    })\n\n    this.partitionSpace(particles, boundries, 10);\n  }\n\n  public static checkBoundries(particle: Particle, boundry: Rectangle) {\n    if ( particle.position.x - particle.radius < boundry.x1.x) {\n      CollisionParticleWall.collide(particle,{x: 1, y: 0}, boundry.x1.x - ( particle.position.x - particle.radius));\n    }\n\n    if ( particle.position.x + particle.radius > boundry.x2.x) {\n      CollisionParticleWall.collide(particle,{x: -1, y: 0}, (particle.position.x + particle.radius) - boundry.x2.x);\n    }\n\n    if ( particle.position.y - particle.radius < boundry.x1.y) {\n      CollisionParticleWall.collide(particle,{x: 0, y: 1}, boundry.x1.y - ( particle.position.y - particle.radius));\n    }\n\n    if ( particle.position.y + particle.radius > boundry.x2.y) {\n      CollisionParticleWall.collide(particle,{x: 0, y: -1}, (particle.position.y + particle.radius) - boundry.x2.y);\n    }\n\n  }\n\n  public static partitionSpace(particles: Particle[], boundry: Rectangle, depth: number) {\n    const r1c = 10;\n    const r2c = 10;\n\n\n      if (particles.length < 2)\n        return;\n\n      if ( particles.length === 2) {\n\n\n        const distanceBetweenCircles: number = CMath.len(CMath.sub(particles[0].position, particles[1].position))  ;\n\n//        console.log(distanceBetweenCircles);\n\n        if ( distanceBetweenCircles < (r1c + r2c)) {\n          const penDepth = r1c + r2c - distanceBetweenCircles;\n\n          CollisionParticleParticle.collide(particles[0], particles[1], penDepth);\n        }\n\n        return;\n      }\n\n      if ( depth === 0) {\n        for ( let i = 0; i < particles.length; i++) {\n          for (let j = i + 1 ; j < particles.length; j++) {\n            const distanceBetweenCircles: number = CMath.len(CMath.sub(particles[i].position, particles[j].position))  ;\n\n            if ( distanceBetweenCircles < (r1c + r2c)) {\n              const penDepth = r1c + r2c - distanceBetweenCircles;\n\n              CollisionParticleParticle.collide(particles[i], particles[j], penDepth);\n            }\n          }\n        }\n        return;\n      }\n\n      const w = boundry.x2.x - boundry.x1.x;\n      const h = boundry.x2.y - boundry.x1.y;\n\n      let r1: Rectangle;\n      let r2: Rectangle;\n\n      if ( w > h) {\n        r1 = {\n          x1: {\n            x: boundry.x1.x,\n            y: boundry.x1.y,\n          },\n          x2: {\n            x: boundry.x1.x + w/2,\n            y: boundry.x2.y\n          }\n        };\n\n        r2 = {\n          x1: {\n            x: boundry.x1.x + w/2,\n            y: boundry.x1.y,\n          },\n          x2: {\n            x: boundry.x2.x,\n            y: boundry.x2.y\n          }\n        };\n      } else {\n        r1 = {\n          x1: {\n            x: boundry.x1.x,\n            y: boundry.x1.y,\n          },\n          x2: {\n            x: boundry.x2.x,\n            y: boundry.x1.y + h/2\n          }\n        };\n\n        r2 = {\n          x1: {\n            x: boundry.x1.x,\n            y: boundry.x1.y + h/2,\n          },\n          x2: {\n            x: boundry.x2.x,\n            y: boundry.x2.y\n          }\n        };\n      }\n\n\n      const s1: Particle[] = [];\n      const s2: Particle[] = [];\n\n      particles.forEach( (particle) => {\n        if (this.isInRectangle(particle, r1))\n          s1.push(particle);\n        else\n          s2.push(particle);\n      });\n\n      this.partitionSpace(s1, r1, depth - 1);\n      this.partitionSpace(s2, r2, depth - 1);\n\n\n  }\n\n\n\n  public static isInRectangle(particle: Particle, boundry: Rectangle): boolean {\n    if (particle.position.x >= boundry.x1.x && particle.position.x <= boundry.x2.x) {\n      if ( particle.position.y >= boundry.x1.y && particle.position.y <= boundry.x2.y)\n        return true;\n    }\n    return false;\n  }\n\n}\n","import {Particle} from \"@orbitweb/common\";\nimport {Vector2} from \"@orbitweb/common\";\nimport {CMath} from \"@orbitweb/common\";\n\nexport class CollisionParticleParticle {\n  public static collide(p1: Particle, p2: Particle, penetrationDepth: number) {\n    const r1 = 10;\n    const r2 = 10;\n\n    const deltaVector: Vector2 = CMath.sub(p1.position, p2.position);\n\n    const distanceBetweenCircles: number = CMath.len(deltaVector);\n\n    // Changing speed of colliders\n\n    const getV = (v1, v2, m1, m2) => {\n      return (v1 * (m1 - m2) + (2 * m2 * v2)) / (m1 + m2);\n    };\n\n    const v1 = {\n      x: getV(p1.speed.x, p2.speed.x, p1.mass, p2.mass),\n      y: getV(p1.speed.y, p2.speed.y, p1.mass, p2.mass),\n    };\n\n    const v2 = {\n      x: getV(p2.speed.x, p1.speed.x, p2.mass, p1.mass),\n      y: getV(p2.speed.y, p1.speed.y, p2.mass, p1.mass),\n    };\n\n    p1.speed = v1;\n    p2.speed = v2;\n\n    // Changing orientation of colliders\n\n    const viewDir = {x: 0, y: 1};\n\n    const rot1 =  CMath.angle( CMath.normalize(v1), viewDir);\n    const rot2 =  CMath.angle( CMath.normalize(v2), viewDir);\n\n    p1.rotation = rot1;\n    p2.rotation = rot2;\n\n    const pCollision: Vector2 = {\n      x: (p1.position.x * p2.radius + p2.position.x * p1.radius) / (p1.radius + p2.radius),\n      y: (p1.position.y * p2.radius + p2.position.y * p1.radius) / (p1.radius + p2.radius),\n    };\n\n\n    // Particle displacement\n\n    const dist1: Vector2 = CMath.sub(p1.position, pCollision);\n    const dist2: Vector2 = CMath.sub(p2.position, pCollision);\n\n    const f1: number = 1 - (CMath.len(dist1) / p1.radius);\n    const f2: number = 1 - (CMath.len(dist2) / p2.radius);\n\n\n    const dn1: Vector2 = CMath.normalize(dist1);\n    const dn2: Vector2 = CMath.normalize(dist2);\n\n    p1.position.x += dn1.x * ( 1 + f1);\n    p1.position.y += dn1.y * ( 1 + f1);\n\n    p2.position.x += dn2.x * ( 1 + f2);\n    p2.position.y += dn2.y * ( 1 + f2);\n\n  }\n}\n","import {Particle} from \"@orbitweb/common\";\nimport {Vector2} from \"@orbitweb/common\";\nimport {CMath} from \"@orbitweb/common\";\n\nexport class CollisionParticleWall {\n  public static collide(particle: Particle, n: Vector2, penetrationDepth: number) {\n    //console.log(\"collide\");\n\n    const d: Vector2 = CMath.normalize(particle.speed);\n    const curSpeed: number = CMath.len(particle.speed);\n    //console.log(\"normal\", n);\n    //console.log(\"speed\", d);\n\n    const r = CMath.sub(d, CMath.scale(n , 2 * CMath.dot(d, n)));\n\n    const viewDir = CMath.rotate({x: 0, y: 1}, 0);\n\n\n    //console.log(\"viewDir\", viewDir);\n    //console.log(\"r\", r);\n\n\n    //particle.speed = r;\n    const angle = CMath.angle( r, viewDir);\n\n    //console.log(angle);\n\n    particle.rotation = angle;\n\n    const displacementVector = CMath.scale(n, penetrationDepth);\n\n    particle.position.x += displacementVector.x;\n    particle.position.y += displacementVector.y;\n    //console.log(particle.position);\n\n    particle.speed = CMath.scale(r, curSpeed);\n\n    //console.log(\"---\");\n\n  }\n}\n","import {IPhysics, PhysicsInput} from \"./IPhysics\";\n\n\nimport {Particle, Spaceship} from \"@orbitweb/common\";\n\nimport {Vector2} from \"@orbitweb/common\";\nimport {CMath} from \"@orbitweb/common\";\n\n\nexport class ArcadePhysics extends IPhysics {\n  public getOrientation(particle: Particle): Vector2 {\n    return CMath.rotate({x: 0, y: 1}, particle.rotation);\n  }\n\n  public iterate(spaceship: Spaceship, delta) {\n    super.iterate(spaceship, delta);\n\n    const orientation = this.getOrientation(spaceship);\n\n    if ( spaceship.curSpeedDEP > spaceship.maxSpeed) {\n      spaceship.curSpeedDEP = spaceship.maxSpeed;\n    }\n\n    if ( spaceship.curSpeedDEP > 1.05 * (spaceship.speedInput * spaceship.maxSpeed)) {\n      spaceship.curSpeedDEP -= spaceship.acceleration * delta;\n    } else if ( spaceship.curSpeedDEP < 0.95 * (spaceship.speedInput * spaceship.maxSpeed) ) {\n      spaceship.curSpeedDEP += spaceship.acceleration * delta;\n    } else {\n\n    }\n\n    spaceship.speed = {\n      x: orientation.x * spaceship.curSpeedDEP,\n      y: orientation.y * spaceship.curSpeedDEP\n    }\n\n  }\n\n  public moveTo(particle: Particle, target: Vector2, stopAtTarget?: boolean): PhysicsInput {\n    const dir = {\n      x: target.x - particle.position.x,\n      y: target.y - particle.position.y\n    };\n\n    const orientation = this.getOrientation(particle);\n    const angleTarget =  CMath.angle(dir, orientation);\n\n    return {\n      r: angleTarget,\n      a: {\n        x: 0,\n        y: 0\n      },\n      vCap: 1\n    };\n  }\n\n}\n","import {IPhysics, PhysicsInput} from \"./IPhysics\";\n\n\nimport {Particle, Spaceship} from \"@orbitweb/common\";\n\nimport * as math from \"mathjs\";\nimport {Vector2} from \"@orbitweb/common\";\nimport {CMath} from \"@orbitweb/common\";\n\nexport class HybridPhysics extends IPhysics {\n  public getOrientation(particle: Particle): Vector2 {\n\n    const n: number = <number> math.norm( [particle.speed.x, particle.speed.y]);\n    //console.log(n);\n\n\n    //\n    if(n == 0) {\n      return CMath.rotate({x: 0, y: 1}, particle.rotation);\n    } else {\n      return {\n        x: particle.speed.x / n,\n        y: particle.speed.y / n\n      }\n    }\n\n\n    //return particle.speed;\n  }\n\n  public iterate(spaceship: Spaceship, delta) {\n    super.iterate(spaceship, delta);\n\n    const orientation = this.getOrientation(spaceship);\n\n    const v = CMath.len(spaceship.speed);\n\n\n    if ( v > spaceship.speedInput * spaceship.maxSpeed) {\n\n      const bremskraft: Vector2 = {\n        x: spaceship.speed.x / v,\n        y: spaceship.speed.y / v\n      }\n\n      spaceship.speed.x -= 2 * bremskraft.x * spaceship.acceleration * delta;\n      spaceship.speed.y -= 2 * bremskraft.y * spaceship.acceleration * delta;\n    }\n/*\n    if ( math.abs(spaceship.omega) > spaceship.maxOmega ) {\n      spaceship.omega = math.sign(spaceship.omega) * spaceship.maxOmega;\n    }\n    */\n\n    spaceship.omega = spaceship.omega / (4 * delta);\n\n  }\n\n  public moveTo(particle: Spaceship, target: Vector2, stopAtTarget?: boolean): PhysicsInput {\n\n    const dir = {\n      x: target.x - particle.position.x,\n      y: target.y - particle.position.y\n    };\n\n    const orientation = this.getOrientation(particle);\n\n    const angle = CMath.angle(dir, CMath.rotate({x: 0, y: 1}, particle.rotation));\n\n\n\n    let  angleTarget =  CMath.angle(dir, orientation);\n\n    let ang = angleTarget;\n\n/*\n    //ang = 0;\n\n        if ( math.abs(ang) > this.maxOmega / delta) {\n          ang = math.sign(ang) * this.maxOmega;\n        }\n\n\n    const newSpeed = CMath.rotate(this.speed, ang);\n*/\n\n\n    const a: Vector2 = {\n      x: 0,\n      y: 0\n    }\n\n    if( math.abs(angleTarget) > 0) {\n\n      //const schub: Vector2 = CMath.rotate(this.getOrientation(this), angleTarget);\n\n      const b = {\n        x: particle.position.x + particle.speed.x * 0.016,\n        y: particle.position.y + particle.speed.y * 0.016,\n      };\n\n      const schub: Vector2 = CMath.sub(target, b);\n      const schub_len = CMath.len(schub);\n\n      a.x = particle.acceleration *  schub.x / schub_len;\n      a.y = particle.acceleration *  schub.y / schub_len;\n\n    } else {\n      a.x = particle.acceleration * orientation.x;\n      a.y = particle.acceleration * orientation.y;\n\n    }\n\n    return {\n      a: a,\n      r: angle,\n      vCap: 1\n    }\n\n  }\n\n}\n","import * as math from \"mathjs\";\nimport {Particle, Spaceship} from \"@orbitweb/common\";\nimport {Tangents, Vector2} from \"@orbitweb/common\";\nimport {CMath} from \"@orbitweb/common\";\n\n\nexport interface PhysicsInput {\n  r: number,\n  a: Vector2,\n  vCap: number\n}\n\nexport abstract class IPhysics {\n  abstract getOrientation(particle: Particle): Vector2;\n\n  abstract moveTo(particle: Particle, target: Vector2, stopAtTarget?: boolean): PhysicsInput;\n\n  protected orbitOutside(spaceship: Spaceship, target: Vector2, t1: Vector2, t2: Vector2): PhysicsInput {\n\n    const orient = this.getOrientation(spaceship);\n\n    const v1: Vector2 = {\n      x: t1.x - spaceship.position.x,\n      y: t1.y - spaceship.position.y,\n    };\n\n    const v2: Vector2 = {\n      x: t2.x - spaceship.position.x,\n      y: t2.y - spaceship.position.y,\n    };\n\n    const angle1: number = CMath.degree(v1, orient);\n    const angle2: number = CMath.degree(v2, orient);\n\n    if ( math.abs(angle2) < math.abs(angle1))\n      return this.moveTo(spaceship, t2);\n    else\n      return this.moveTo(spaceship, t1);\n\n  }\n\n  protected orbitTangent(spaceship: Spaceship, target: Vector2): PhysicsInput {\n    const angle = CMath.angle(this.getOrientation(spaceship), {x: 0, y: 1});\n    return {\n      r: angle,\n      a: {\n        x: 0,\n        y: 0\n      },\n      vCap: 1\n    };\n  }\n\n  protected orbitInside(spaceship: Spaceship, target: Vector2): PhysicsInput {\n    return this.keepAtRange(spaceship, target, spaceship.orbitRadius);\n  }\n\n  public keepAtRange(spaceship: Spaceship, target: Vector2, range: number): PhysicsInput {\n    const dir: Vector2 = {\n      x: target.x - spaceship.position.x,\n      y: target.y - spaceship.position.y\n    };\n\n\n    const len = CMath.len(dir);\n\n    const targetPoint: Vector2 = {\n      x: dir.x * range / len,\n      y: dir.y * range / len,\n    }\n\n    return this.moveTo(spaceship, targetPoint);\n\n  }\n\n  public orbitTarget(spaceship: Spaceship, target: Vector2): PhysicsInput {\n    const tangents: Tangents = CMath.constructTangent(target, spaceship.orbitRadius, spaceship.position);\n    if( tangents.tangents !== undefined ) {\n      return this.orbitOutside(spaceship, target, tangents.tangents.t1, tangents.tangents.t2);\n    } else if ( tangents.isInside ) {\n      return this.orbitInside(spaceship, target);\n    } else {\n      return this.orbitTangent(spaceship, target);\n    }\n  }\n\n  public iterate(spaceship: Spaceship, delta) {\n\n    const angle = spaceship.rotation;\n\n    let acc = {\n      x: 0,\n      y: 0\n    };\n\n    if (CMath.len(spaceship.speed) > 0) {\n      acc = CMath.scale(CMath.rotate({\n        x: 0,\n        y: 1\n      }, angle), spaceship.acceleration);\n    }\n\n\n\n\n    let input = {\n      r: 0,\n      a: acc\n    };\n\n    if (spaceship.actionOrbitTarget) {\n      if( spaceship.targetPlayer !== undefined)\n        input = this.orbitTarget(spaceship, spaceship.targetPlayer.position);\n\n    } else if (spaceship.actionKeepAtRange) {\n      if( spaceship.targetPlayer !== undefined)\n        input = this.keepAtRange(spaceship, spaceship.targetPlayer.position, spaceship.orbitRadius);\n    }  else {\n      if (spaceship.targetPosition !== undefined) {\n        const a: Vector2 = this.getOrientation(spaceship);\n        const b: Vector2 = CMath.normalize(CMath.sub(spaceship.targetPosition, spaceship.position));\n\n        if ( math.abs(CMath.angle(a, b)) < 0.5) {\n          spaceship.targetPosition = undefined;\n        } else {\n          input = this.moveTo(spaceship, spaceship.targetPosition);\n        }\n      }\n    }\n\n    spaceship.accel = input.a;\n    spaceship.omega = input.r;\n  }\n\n\n}\n\n\n","import {IPhysics, PhysicsInput} from \"./IPhysics\";\n\nimport * as math from \"mathjs\";\nimport {Particle, Spaceship} from \"@orbitweb/common\";\nimport {Vector2} from \"@orbitweb/common\";\nimport {CMath} from \"@orbitweb/common\";\n\n\nexport class RealPhysics extends IPhysics {\n  public getOrientation(particle: Particle): Vector2 {\n    return CMath.rotate({x: 0, y: 1}, particle.rotation);\n  }\n\n  public iterate(spaceship: Spaceship, delta) {\n    super.iterate(spaceship, delta);\n\n    const orientation = this.getOrientation(spaceship);\n\n    const v = CMath.len(spaceship.speed);\n\n\n    if ( v > spaceship.speedInput * spaceship.maxSpeed) {\n      spaceship.speed.x -= orientation.x * spaceship.acceleration * delta;\n      spaceship.speed.y -= orientation.y * spaceship.acceleration * delta;\n    }\n\n    if ( math.abs(spaceship.omega) > spaceship.maxOmega ) {\n      spaceship.omega = math.sign(spaceship.omega) * spaceship.maxOmega;\n    }\n\n  }\n\n\n  public moveTo(particle: Spaceship, target: Vector2, stopAtTarget?: boolean): PhysicsInput {\n\n    const dir = {\n      x: target.x - particle.position.x,\n      y: target.y - particle.position.y\n    };\n\n    const orientation = this.getOrientation(particle);\n\n    const angle = CMath.angle(orientation, {x: 0, y: 1});\n    let  angleTarget =  CMath.angle(dir, orientation);\n\n    const d = CMath.rotate(orientation, angleTarget);\n\n    return {\n      r: angleTarget,\n      a: {\n        x: d.x * particle.acceleration,\n        y: d.y * particle.acceleration\n      },\n      vCap: 1\n    }\n\n  }\n\n}\n","export * from './lib/GameLogic';\nexport * from './lib/EventManager';\n","import * as events from 'events';\n\nexport class EventManager {\n\n\n  public static shootProjectile = new events.EventEmitter();\n//  public static playerHit: EventEmitter<{ target: Spaceship, damage: number }> = new EventEmitter<{ target: Spaceship, damage: number }>();\n  //public static playerKilled: EventEmitter<{ target: Spaceship }> = new EventEmitter<{ target: Spaceship }>();\n}\n","import {SpaceshipEntity} from \"./model/SpaceshipEntity\";\nimport {SkillEntity} from \"./model/SkillEntity\";\nimport {ProjectileEntity} from \"./model/ProjectileEntity\";\nimport {StructureEntity} from \"./model/StructureEntity\";\nimport {Scoreboard} from \"./core/Scoreboard\";\nimport {Rectangle, Vector2} from \"@orbitweb/common\";\nimport {Physics} from \"@orbitweb/common\";\nimport {PlayerUpdateMessage} from \"@orbitweb/common\";\nimport {ProjectileUpdateMessage} from \"@orbitweb/common\";\nimport {Skill} from \"@orbitweb/common\";\nimport {CollisionDetection} from \"../../../game-engine/src/lib/CollisionDetection\";\nimport {EventManager} from \"./EventManager\";\nimport {Message} from \"@orbitweb/common\";\nimport {ProjectileSpawnMessage} from \"@orbitweb/common\";\n\nimport {StructurePortalEntity} from \"./entity/structures/StructurePortalEntity\";\n\nimport {PlayerMessage} from \"@orbitweb/common\";\n\nimport {MessageDeserializer} from \"./serialize/MessageDeserializer\";\nimport {GarbageCollector} from \"./core/GarbageCollector\";\nimport {ServerEnemySpawnMessage} from \"./entity/message/ServerEnemySpawnMessage\";\nimport {EnemySpawnMessage} from \"@orbitweb/common\";\n\nexport class GameLogic {\n\n  public uniqueIterator: number = 0;\n\n  public players: SpaceshipEntity[] = [];\n\n  public skills: SkillEntity[] = [];\n\n  public projectiles: ProjectileEntity[] = [];\n\n  public structures: StructureEntity[] = [];\n\n  public scoreboard: Scoreboard;\n\n  public boundries: Rectangle = {\n    x1: {\n      x: -1000,\n      y: -500,\n    },\n    x2: {\n      x: 2000,\n      y: 1000\n    }\n  };\n\n  constructor() {\n\n    this.scoreboard = new Scoreboard();\n\n    this.spawnPortal(-700, 450);\n\n\n    EventManager.shootProjectile.on('shootProjectile', (msg) => {\n      this.onShootProjectile(msg)\n    });\n\n    EventManager.shootProjectile.on('playerHit', (msg) => {\n      this.onPlayerHit(msg);\n    });\n\n\n\n  }\n\n  public gameLoop(delta: number) {\n    this.players.forEach( (player) => {\n      player.iterate(delta);\n      Physics.iterate(player, delta);\n\n      const msg = new PlayerUpdateMessage(player);\n      this.send(msg);\n    });\n\n\n    this.projectiles.forEach( (value: ProjectileEntity) => {\n      value.iterate(delta);\n\n      const msg = new ProjectileUpdateMessage(value);\n      this.send(msg);\n    });\n\n    this.skills.forEach( (skill: Skill) => {\n      skill.iterate(delta);\n    })\n\n    CollisionDetection.detect(this.players, this.structures, this.boundries);\n  }\n\n  public send(msg) { }\n\n\n  public onMessage(msg: Message, broadCast, singleCast) {\n    const serverMessage = MessageDeserializer.deserialize(msg);\n\n    if (serverMessage) {\n      serverMessage.onRecieve(this);\n    }\n\n    if ( !!(<PlayerMessage> msg).source ) {\n      const playerName = (<PlayerMessage> msg).source;\n      const spaceShip: SpaceshipEntity = this.getPlayer(playerName);\n      if ( spaceShip !== undefined ) {\n        spaceShip.timestampLastActionMs = new Date().getTime();\n      }\n    }\n\n  }\n\n  public getPlayer(name: string): SpaceshipEntity {\n    return this.players.find( (p) => p.id === name);\n  }\n\n\n\n  public getUniqueId(): number {\n    return this.uniqueIterator++;\n  }\n\n  public gc() {\n    GarbageCollector.execute(this);\n  }\n\n\n  public spawnDefaultEnemy() {\n    const msg: ServerEnemySpawnMessage = new ServerEnemySpawnMessage(new EnemySpawnMessage(\"Enemy\"));\n    msg.onRecieve(this);\n  }\n\n  public spawnPortal(x: number, y: number) {\n    let structure = new StructurePortalEntity(x, y, this.scoreboard);\n    structure.id = ''+this.getUniqueId();\n    this.structures.push(structure);\n  }\n\n  public onPlayerHit(msg: any) {\n    msg.target.health -= msg.damage;\n  }\n\n  public onShootProjectile(msg: any) {\n    const projectileEntity: ProjectileEntity = <ProjectileEntity> msg.projectile;\n    projectileEntity.id = ''+this.getUniqueId();\n    projectileEntity.onInit();\n\n    this.projectiles.push(projectileEntity);\n\n    const res: Message = new ProjectileSpawnMessage(projectileEntity, projectileEntity.source.id, projectileEntity.target.id);\n    this.send(res);\n  }\n\n\n\n}\n","import {GameLogic} from \"../GameLogic\";\nimport {SpaceshipEntity} from \"../model/SpaceshipEntity\";\nimport {ScoreboardUpdateMessage} from \"@orbitweb/common\";\nimport {Message} from \"@orbitweb/common\";\nimport {PlayerKilledMessage} from \"@orbitweb/common\";\nimport {Inventory} from \"@orbitweb/common\";\nimport {ShipEquipment} from \"@orbitweb/common\";\nimport {StructureLootEntity} from \"../entity/structures/StructureLootEntity\";\nimport {StructureSpawnMessage} from \"@orbitweb/common\";\nimport {SkillEntity} from \"../model/SkillEntity\";\nimport {ProjectileEntity} from \"../model/ProjectileEntity\";\nimport {ProjectileDestroyMessage} from \"@orbitweb/common\";\nimport {StructureEntity} from \"../model/StructureEntity\";\nimport {StructureDestroyMessage} from \"@orbitweb/common\";\n\nexport class GarbageCollector {\n  public static execute(context: GameLogic) {\n    this.gcPlayer(context);\n    this.gcProjectile(context);\n    this.gcStructure(context);\n    this.gcSkill(context);\n\n  }\n\n\n  public static gcPlayer(context: GameLogic) {\n    const now: number = new Date().getTime();\n    // Player\n    const removePlayer: SpaceshipEntity[] = [];\n\n    context.players.forEach( (player: SpaceshipEntity) => {\n      if( player.health <= 0)\n        removePlayer.push(player);\n      else if ( !player.isNPC ) {\n        const lastPlayerAction = player.timestampLastActionMs ? player.timestampLastActionMs : 0;\n        const timeSinceLastAction = now - lastPlayerAction;\n\n        if (timeSinceLastAction > player.maxIdleTimeMs) {\n          player.silentRemove = true;\n          removePlayer.push(player);\n        }\n      }\n\n    })\n\n    removePlayer.forEach( (value: SpaceshipEntity) => {\n      const msgSB = new ScoreboardUpdateMessage(context.scoreboard.scoreboard);\n      context.send(msgSB);\n\n      const msg: Message = new PlayerKilledMessage(value, undefined);\n      context.send(msg);\n\n      if ( !value.silentRemove) {\n\n        const inventoryLoot = value.inventory;\n        const fittingLoot = value.fitting.fitting.reduce((acc: Inventory[], cur: ShipEquipment) => {\n          if (cur.name !== \"Empty\") {\n            const inventory = new Inventory(cur.name);\n            inventory.amount = 1;\n            acc.push(inventory)\n          }\n\n          return acc;\n        }, []);\n\n        const inventory: Inventory[] = inventoryLoot.concat(fittingLoot).reduce((acc: Inventory[], cur) => {\n          let loot = acc.find((l) => l.name === cur.name)\n\n          if (loot === undefined) {\n            loot = new Inventory(cur.name);\n            acc.push(loot);\n          }\n\n          loot.amount += cur.amount;\n\n          return acc;\n        }, []);\n\n        const lootStructure = new StructureLootEntity(value.position.x, value.position.y, inventory);\n        lootStructure.id = '' + context.getUniqueId();\n        lootStructure.info = value.id;\n        lootStructure.timestampSpawnMs = now;\n        context.structures.push(lootStructure);\n\n        const loot: Message = new StructureSpawnMessage(lootStructure);\n        context.send(loot);\n      }\n\n      context.players.forEach( value1 => {\n        if ( value1.targetPlayer !== undefined && value1.targetPlayer.id === value.id)\n          value1.targetPlayer = undefined;\n      });\n\n      const index = context.players.findIndex( value1 => value1.id === value.id)\n      context.players[index].onDestroy();\n      context.players.splice(index, 1);\n    })\n  }\n\n  public static gcProjectile(context: GameLogic) {\n\n    // Projectiles\n    const removeProjectiles: ProjectileEntity[] = [];\n\n    context.projectiles.forEach( value => {\n      if( value.timeToLife <= 0)\n        removeProjectiles.push(value);\n    });\n\n    removeProjectiles.forEach( value => {\n      const index = context.projectiles.findIndex( value1 => value1.id === value.id)\n      context.projectiles[index].onDestroy();\n      context.projectiles.splice(index, 1);\n\n      const msg = new ProjectileDestroyMessage(value);\n      context.send(msg);\n    })\n\n  }\n\n  public static gcStructure(context: GameLogic) {\n    const now: number = new Date().getTime();\n\n    // Structures\n    const removeStructures: StructureEntity[] = [];\n\n    context.structures.forEach( (structure: StructureEntity) => {\n      if( structure.destroy)\n        removeStructures.push(structure);\n      else if ( !structure.isStatic) {\n        const spawnTime = structure.timestampSpawnMs ? structure.timestampSpawnMs : 0;\n        const timeSinceSpawn = now - spawnTime;\n\n        if (timeSinceSpawn > structure.maxIdleTimeMs) {\n          removeStructures.push(structure);\n        }\n      }\n    })\n\n    removeStructures.forEach( value => {\n      const index = context.structures.findIndex( value1 => value1.id === value.id);\n      context.structures[index].onDestroy();\n      context.structures.splice(index, 1);\n\n      context.players.forEach( (player) => {\n        if ( player.targetStructure !== undefined && player.targetStructure.id === value.id ) {\n          player.targetStructure = undefined;\n          player.actionUseStructure = false;\n        }\n      });\n\n      const msg = new StructureDestroyMessage(value);\n      context.send(msg);\n    })\n\n  }\n\n  public static gcSkill(context: GameLogic) {\n\n    // Skills\n    const removeSkills: SkillEntity[] = [];\n\n    context.skills.forEach( (skill: SkillEntity) => {\n      if( skill.remainingTime < 0)\n        removeSkills.push(skill);\n    })\n\n    removeSkills.forEach( value => {\n      const index = context.skills.findIndex( value1 => value1.id === value.id)\n      context.skills[index].onDestroy();\n      context.skills.splice(index, 1);\n    })\n\n  }\n\n}\n","import {ScoreboardEntry} from \"@orbitweb/common\";\nimport {Inventory} from \"@orbitweb/common\";\n\nexport class Scoreboard {\n  public scoreboard: ScoreboardEntry[] = [];\n\n  public addKill(name: string) {\n    let score = this.scoreboard.find ( (sb) => sb.name === name);\n\n    if ( score === undefined) {\n        score = new ScoreboardEntry(name, 0);\n        this.scoreboard.push(score);\n    }\n\n    score.kills++;\n  }\n\n  public depositLoot(name: string, loot: Inventory[]) {\n\n    let score = this.scoreboard.find ( (sb) => sb.name === name);\n\n    if ( score === undefined) {\n      score = new ScoreboardEntry(name, 0);\n      this.scoreboard.push(score);\n    }\n\n    loot.forEach( (l) => {\n      score.kills += l.amount;\n    })\n\n\n\n\n  }\n}\n","import {Spaceship} from \"@orbitweb/common\";\nimport {Rectangle, Vector2} from \"@orbitweb/common\";\nimport {CMath} from \"@orbitweb/common\";\n\nexport class Spawner {\n  constructor(private boundry: Rectangle) {\n\n  }\n\n  public spawnPosition(spaceship: Spaceship){\n    if (spaceship.position === undefined || spaceship.position === null)\n      this.spawnRandom(spaceship);\n  }\n\n  public spawnRandom(spaceship: Spaceship) {\n    const spawnArea: Rectangle = this.getSpawnArea(this.boundry)\n    const spawn = this.getSpawnPosition(spawnArea);\n\n    spaceship.position = spawn.pos;\n    spaceship.rotation = spawn.rotation;\n\n    if ( !spaceship.isNPC )\n      spaceship.timestampLastActionMs = new Date().getTime();\n  }\n\n\n  protected getSpawnArea(boundries: Rectangle): Rectangle {\n    return {\n      x1: {\n        x: -600,\n        y: 200,\n      },\n      x2: {\n        x: -200,\n        y: 400,\n      }\n    };\n  }\n\n  protected getSpawnPosition(boundries: Rectangle, index?: any): {pos: Vector2, rotation: number } {\n\n    let xRand = Math.random();\n    let yRand = Math.random();\n\n    const center = {\n      x: boundries.x1.x + (boundries.x2.x - boundries.x1.x) / 2,\n      y: boundries.x1.y + (boundries.x2.y - boundries.x1.y) / 2\n    }\n\n    const pos = {\n      x: boundries.x1.x + Math.floor(xRand * Math.floor(boundries.x2.x - boundries.x1.x)),\n      y: boundries.x1.y +Math.floor(yRand * Math.floor(boundries.x2.y - boundries.x1.y)),\n    };\n\n\n    const angle = CMath.angle(CMath.sub(center, pos), {x: 0, y: 1});\n\n    return {\n      pos: pos,\n      rotation: angle\n    };\n  }\n\n}\n","import {ShipEquipmentEntity} from \"../../model/ShipEquipmentEntity\";\nimport {ShipEquipment} from \"@orbitweb/common\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\n\nexport class EquipmentEntityBattery extends ShipEquipmentEntity {\n  private bonusRate: number = 0.6;\n\n  constructor(shipEquipment: ShipEquipment) {\n    super(shipEquipment);\n  }\n\n  public onInit(parent: SpaceshipEntity) {\n    super.onInit(parent);\n\n    parent.energyRechargeRate *= (1 + this.bonusRate);\n  }\n\n  public iterate(parent: SpaceshipEntity, delta: number) { }\n}\n","import {ShipEquipmentEntity} from \"../../model/ShipEquipmentEntity\";\nimport {ShipEquipment} from \"@orbitweb/common\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\n\nexport class EquipmentEntityEmpty extends ShipEquipmentEntity {\n  constructor(shipEquipment: ShipEquipment) {\n    super(shipEquipment);\n  }\n\n\n  public iterate(parent: SpaceshipEntity, delta: number) {\n\n  }\n\n  protected onStartEquipment(parent: SpaceshipEntity) {\n\n  }\n\n  protected onEndEquipment(parent: SpaceshipEntity) {\n\n  }\n}\n","import {ShipEquipment} from \"@orbitweb/common\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\nimport {CMath} from \"@orbitweb/common\";\nimport * as math from \"mathjs\";\nimport {Vector2} from \"@orbitweb/common\";\nimport {EventManager} from \"../../EventManager\";\nimport {ProjectileEntity} from \"../../model/ProjectileEntity\";\nimport {ShipEquipmentTargetEntity} from \"../../model/ShipEquipmentTargetEntity\";\n\nexport class EquipmentEntityLaser extends ShipEquipmentTargetEntity {\n\n  private maxOmega = 0.4;\n  private maxAimAngle: number = 0.2;\n  private damage: number = 5;\n\n\n\n  constructor(shipEquipment: ShipEquipment) {\n    super(shipEquipment);\n    this.range = 400;\n  }\n\n\n  public iterate(parent: SpaceshipEntity, delta: number) {\n    super.iterate(parent, delta);\n\n    if ( parent.targetPlayer !== undefined) {\n      this.alignCannon(parent, delta);\n    }\n  }\n\n\n  protected onStartEquipment(parent: SpaceshipEntity) {\n    super.onStartEquipment(parent);\n\n    this.shoot(parent);\n  }\n\n  protected isTargetInRange(parent: SpaceshipEntity): boolean {\n    const targetVector = CMath.sub(parent.targetPlayer.position, parent.position);\n    const len = CMath.len(targetVector);\n    const angle = CMath.angle(targetVector, this.getOrientation(parent));\n\n    return math.abs(angle) < this.maxAimAngle && len < this.range;\n  }\n\n  private alignCannon(parent: SpaceshipEntity, delta: number) {\n\n    const targetVector = CMath.sub(parent.targetPlayer.position, parent.position);\n    let omega = CMath.angle(targetVector, this.getOrientation(parent)) / delta;\n\n    if ( math.abs(omega) > this.maxOmega)\n      omega = math.sign(omega) * this.maxOmega;\n\n\n    this.state.rotation += omega * delta;\n  }\n\n\n  private shoot(parent: SpaceshipEntity) {\n    const targetVector = CMath.sub(parent.targetPlayer.position, parent.position);\n    const angle = CMath.angle(targetVector, this.getOrientation(parent));\n\n\n      const start: Vector2 = {\n        x: parent.position.x,\n        y: parent.position.y\n      };\n\n      let end: Vector2 = {\n        x: parent.targetPlayer.position.x,\n        y: parent.targetPlayer.position.y\n      };\n\n      const v: Vector2 = CMath.sub(end, start);\n\n      const length = math.norm( [v.x, v.y]);\n\n      parent.targetPlayer.health -= this.damage;\n      (<SpaceshipEntity> parent.targetPlayer).lastHitBy = parent;\n\n      const proj: ProjectileEntity = new ProjectileEntity(undefined, parent, <SpaceshipEntity> parent.targetPlayer);\n      EventManager.shootProjectile.emit(\"shootProjectile\", { projectile: proj});\n\n  }\n\n  private getOrientation(parent: SpaceshipEntity): Vector2 {\n    return CMath.rotate({x: 0, y: 1}, this.state.rotation);\n  }\n\n}\n","import {ShipEquipmentEntity} from \"../../model/ShipEquipmentEntity\";\nimport {ShipEquipment} from \"@orbitweb/common\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\n\nexport class EquipmentEntityMass extends ShipEquipmentEntity {\n  private bonusRate: number = 0.6;\n\n  constructor(shipEquipment: ShipEquipment) {\n    super(shipEquipment);\n  }\n\n  public onInit(parent: SpaceshipEntity) {\n    super.onInit(parent);\n\n    parent.mass = 1.5;\n  }\n\n  public iterate(parent: SpaceshipEntity, delta: number) { }\n}\n","import {ShipEquipment} from \"@orbitweb/common\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\nimport {ShipEquipmentTargetEntity} from \"../../model/ShipEquipmentTargetEntity\";\n\nexport class EquipmentEntityNosferatu extends ShipEquipmentTargetEntity {\n\n  private drain: number = 40;\n  private gain: number = 20;\n\n\n  constructor(shipEquipment: ShipEquipment) {\n    super(shipEquipment);\n\n    this.range = 150;\n  }\n\n  protected onStartEquipment(parent: SpaceshipEntity) {\n    super.onStartEquipment(parent);\n\n    (<SpaceshipEntity>parent.targetPlayer).power -= this.drain;\n  }\n\n  protected onEndEquipment(parent: SpaceshipEntity) {\n    super.onEndEquipment(parent);\n\n    parent.power += this.gain;\n  }\n\n\n  protected isTargetInRange(parent: SpaceshipEntity): boolean {\n    //return parent.targetPlayer.power > this.drain && super.isTargetInRange(parent);\n    return super.isTargetInRange(parent);\n  }\n}\n","import {ShipEquipmentEntity} from \"../../model/ShipEquipmentEntity\";\nimport {ShipEquipment} from \"@orbitweb/common\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\n\nexport class EquipmentEntityRepair extends ShipEquipmentEntity {\n\n  public repairAmount = 30;\n\n  constructor(shipEquipment: ShipEquipment) {\n    super(shipEquipment);\n    this.powerCost = 1;\n  }\n\n  protected onEndEquipment(parent: SpaceshipEntity) {\n    super.onEndEquipment(parent);\n\n    parent.health += this.repairAmount;\n  }\n}\n","import {ShipEquipment} from \"@orbitweb/common\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\nimport {EventManager} from \"../../EventManager\";\nimport {ProjectileEntity} from \"../../model/ProjectileEntity\";\nimport {ProjectileRocket} from \"../projectiles/ProjectileRocket\";\nimport {ShipEquipmentTargetEntity} from \"../../model/ShipEquipmentTargetEntity\";\n\nexport class EquipmentEntityRocketLauncher extends ShipEquipmentTargetEntity{\n\n  constructor(shipEquipment: ShipEquipment) {\n    super(shipEquipment);\n  }\n\n  protected onStartEquipment(parent: SpaceshipEntity) {\n    super.onStartEquipment(parent);\n\n    const proj: ProjectileEntity = new ProjectileRocket(undefined, parent, <SpaceshipEntity>parent.targetPlayer);\n    EventManager.shootProjectile.emit(\"shootProjectile\", {projectile: proj});\n  }\n\n  protected isTargetInRange(parent: SpaceshipEntity): boolean {\n    return true;\n  }\n}\n","import {ShipEquipmentEntity} from \"../../model/ShipEquipmentEntity\";\nimport {ShipEquipment} from \"@orbitweb/common\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\n\nexport class EquipmentEntitySpeedBooster extends ShipEquipmentEntity {\n\n  private absoluteChange: number = 0;\n\n  private bonus: number = 0.4;\n\n  constructor(shipEquipment: ShipEquipment) {\n    super(shipEquipment);\n  }\n\n  protected onStartEquipment(parent: SpaceshipEntity) {\n    super.onStartEquipment(parent);\n\n    this.absoluteChange = parent.maxSpeed * this.bonus;\n    parent.maxSpeed += this.absoluteChange;\n  }\n\n  protected onEndEquipment(parent: SpaceshipEntity) {\n    super.onEndEquipment(parent);\n\n    parent.maxSpeed -= this.absoluteChange;\n    this.absoluteChange = 0;\n  }\n}\n","import {ShipEquipment} from \"@orbitweb/common\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\nimport {ShipEquipmentTargetEntity} from \"../../model/ShipEquipmentTargetEntity\";\n\nexport class EquipmentEntityWebber extends ShipEquipmentTargetEntity {\n\n  private absoluteChange: number = 0;\n\n  private bonus: number = 0.4;\n\n  private targetPlayer: SpaceshipEntity;\n\n  constructor(shipEquipment: ShipEquipment) {\n    super(shipEquipment)\n    this.range = 250;\n  }\n\n  protected onStartEquipment(parent: SpaceshipEntity) {\n    super.onStartEquipment(parent);\n\n    this.targetPlayer = <SpaceshipEntity>parent.targetPlayer;\n    this.absoluteChange = this.targetPlayer.maxSpeed * this.bonus;\n    this.targetPlayer.maxSpeed -= this.absoluteChange;\n  }\n\n  protected onEndEquipment(parent: SpaceshipEntity) {\n    super.onEndEquipment(parent);\n    if ( this.targetPlayer !== undefined) {\n      this.targetPlayer.maxSpeed += this.absoluteChange;\n      this.absoluteChange = 0.0;\n      this.targetPlayer = undefined;\n    }\n\n\n  }\n}\n","import {ServerMessageRecieved} from \"../../model/ServerMessageRecieved\";\nimport {GameLogic} from \"../../GameLogic\";\nimport {MovementGoalIdle} from \"../movement/MovementGoalIdle\";\n\n\nexport class ServerDebugMessage extends ServerMessageRecieved<any> {\n\n  constructor(message: any) {\n    super(message);\n  }\n\n  onRecieve(context: GameLogic) {\n    context.players.forEach( (player) => {\n      player.speed = {x: 0, y:0};\n      player.movementGoal = new MovementGoalIdle();\n    });\n  }\n}\n","import {ServerMessageRecieved} from \"../../model/ServerMessageRecieved\";\n\nimport {GameLogic} from \"../../GameLogic\";\nimport {Spaceship} from \"@orbitweb/common\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\nimport {ShipFitting} from \"@orbitweb/common\";\n\n\n\nimport {EnemySpawnMessage} from \"@orbitweb/common\";\nimport {MovementGoalIdle} from \"../movement/MovementGoalIdle\";\nimport {ShipEquipment} from \"@orbitweb/common\";\nimport {getRandomColor} from \"@orbitweb/common\";\nimport {Spawner} from \"../../core/Spawner\";\n\n\n\nexport class ServerEnemySpawnMessage extends ServerMessageRecieved<EnemySpawnMessage> {\n\n  constructor(message: EnemySpawnMessage) {\n    super(message);\n  }\n\n  onRecieve(context: GameLogic) {\n    const sp = new Spaceship(\"Enemy\", getRandomColor());\n\n    const player = new SpaceshipEntity(sp);\n    player.isNPC = true;\n\n    new Spawner(context.boundries).spawnRandom(player);\n\n    player.movementGoal = new MovementGoalIdle();\n    //player.movementGoal = new MovementGoalFreeFly();\n    player.fitting = new ShipFitting();\n\n    const eq = new ShipEquipment(\"Loot\", 3, 0, 0, 1, true, {});\n    player.fitting.fitting.push(eq);\n\n    player.onInit();\n    context.players.push(player);\n  }\n}","import {ServerMessageRecieved} from \"../../model/ServerMessageRecieved\";\nimport {PlayerJoinedMessage} from \"@orbitweb/common\";\nimport {GameLogic} from \"../../GameLogic\";\nimport {LobbyQueryMessage} from \"@orbitweb/common\";\nimport {ProjectileSpawnMessage} from \"@orbitweb/common\";\nimport {StructureSpawnMessage} from \"@orbitweb/common\";\nimport {ScoreboardUpdateMessage} from \"@orbitweb/common\";\nimport {BoundryUpdateMessage} from \"@orbitweb/common\";\n\n\nexport class ServerLobbyQueryMessage extends ServerMessageRecieved<LobbyQueryMessage> {\n\n  constructor(message: LobbyQueryMessage) {\n    super(message);\n  }\n\n  onRecieve(context: GameLogic) {\n    context.players.forEach( (player) => {\n      const resmsg: PlayerJoinedMessage = new PlayerJoinedMessage(player);\n      context.send(resmsg);\n    });\n\n    context.projectiles.forEach( (proj) => {\n      const resmsg1: ProjectileSpawnMessage = new ProjectileSpawnMessage(proj, proj.source.id, proj.target.id);\n      context.send(resmsg1);\n    });\n\n    context.structures.forEach( (structure) => {\n      const resmsg2: StructureSpawnMessage = new StructureSpawnMessage(structure);\n      context.send(resmsg2);\n    });\n\n    const ansmsg = new ScoreboardUpdateMessage(context.scoreboard.scoreboard);\n    context.send(ansmsg);\n\n    const boundryMsg = new BoundryUpdateMessage(context.boundries);\n    context.send(boundryMsg);\n  }\n\n\n}\n","import {ServerMessageRecieved} from \"../../model/ServerMessageRecieved\";\nimport {GameLogic} from \"../../GameLogic\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\nimport {PlayerActionMessage} from \"@orbitweb/common\";\nimport {ShipEquipment} from \"@orbitweb/common\";\n\n\nexport class ServerPlayerActionMessage extends ServerMessageRecieved<PlayerActionMessage> {\n\n  constructor(message: PlayerActionMessage) {\n    super(message);\n  }\n\n  onRecieve(context: GameLogic) {\n    const player: SpaceshipEntity = context.getPlayer(this.message.source);\n\n    if ( player === undefined) {\n      console.error(\"Action from unkown user\", this.message);\n      return;\n    }\n\n    let res;\n\n    if ( this.message.skillIndex >= player.fitting.fitting.length) {\n      console.log(\"skill not available\");\n      return;\n    }\n\n    const shipEquipment: ShipEquipment = player.fitting.fitting[this.message.skillIndex]\n    if ( shipEquipment.name !== \"Empty\")\n      shipEquipment.state.pendingState = !shipEquipment.state.pendingState;\n  }\n\n\n}\n","import {ServerMessageRecieved} from \"../../model/ServerMessageRecieved\";\nimport {PlayerJoinedMessage} from \"@orbitweb/common\";\nimport {GameLogic} from \"../../GameLogic\";\nimport {Spaceship} from \"@orbitweb/common\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\nimport {ShipFitting} from \"@orbitweb/common\";\nimport {EquipmentDeserializer} from \"../../serialize/EquipmentDeserializer\";\n\nimport {Spawner} from \"../../core/Spawner\";\nimport {getRandomColor} from \"@orbitweb/common\";\n\n\nexport class ServerPlayerJoinedMessage extends ServerMessageRecieved<PlayerJoinedMessage> {\n\n  constructor(message: PlayerJoinedMessage) {\n    super(message);\n  }\n\n  onRecieve(context: GameLogic) {\n\n    let player = context.players.find( (p) => p.id === this.message.source);\n\n    if ( player === undefined) {\n      const sp = new Spaceship(this.message.source, getRandomColor());\n\n      player = new SpaceshipEntity(sp);\n      player.fitting = new ShipFitting();\n      player.fitting.fitting = this.message.fitting.fitting.map( (fit) => {\n        const eq = EquipmentDeserializer.deserialize(fit);\n        eq.onInit(player);\n        return eq;\n      });\n\n\n      new Spawner(context.boundries).spawnRandom(player);\n\n      player.onInit();\n      context.players.push(player);\n    }\n\n    const resmsg: PlayerJoinedMessage = new PlayerJoinedMessage(player);\n    context.send(resmsg);\n\n  }\n\n\n\n\n}\n","import {ServerMessageRecieved} from \"../../model/ServerMessageRecieved\";\nimport {GameLogic} from \"../../GameLogic\";\nimport {PlayerMoveToMessage} from \"@orbitweb/common\";\nimport {CMath} from \"@orbitweb/common\";\nimport {MovementGoalAlignTo} from \"../movement/MovementGoalAlignTo\";\n\n\nexport class ServerPlayerMoveToMessage extends ServerMessageRecieved<PlayerMoveToMessage> {\n\n  constructor(message: PlayerMoveToMessage) {\n    super(message);\n  }\n\n  onRecieve(context: GameLogic) {\n    const player = context.getPlayer(this.message.source);\n\n    if ( player !== undefined) {\n      const dir =  CMath.sub(this.message.position, player.position);\n\n      const reqAngle = CMath.angle(dir, {x: 0, y:1});\n      player.movementGoal = new MovementGoalAlignTo(reqAngle);\n    }\n  }\n\n\n}\n","import {ServerMessageRecieved} from \"../../model/ServerMessageRecieved\";\nimport {GameLogic} from \"../../GameLogic\";\nimport {PlayerOrbitMessage} from \"@orbitweb/common\";\n\n\nexport class ServerPlayerOrbitMessage extends ServerMessageRecieved<PlayerOrbitMessage> {\n\n  constructor(message: PlayerOrbitMessage) {\n    super(message);\n  }\n\n  onRecieve(context: GameLogic) {\n    const player = context.getPlayer(this.message.source);\n\n    if ( player !== undefined) {\n      const target = context.getPlayer(this.message.target);\n      if ( target !== undefined) {\n        player.targetPlayer = target;\n        player.actionOrbitTarget = true;\n      }\n    }\n  }\n\n\n}\n","import {ServerMessageRecieved} from \"../../model/ServerMessageRecieved\";\n\nimport {GameLogic} from \"../../GameLogic\";\nimport {PlayerSelfKillMessage} from \"@orbitweb/common\";\n\n\nexport class ServerPlayerSelfKillMessage extends ServerMessageRecieved<PlayerSelfKillMessage> {\n\n  constructor(message: PlayerSelfKillMessage) {\n    super(message);\n  }\n\n  onRecieve(context: GameLogic) {\n    const player = context.getPlayer(this.message.source);\n\n    if ( player !== undefined) {\n      player.health = 0;\n    }\n  }\n}\n","import {ServerMessageRecieved} from \"../../model/ServerMessageRecieved\";\n\nimport {GameLogic} from \"../../GameLogic\";\n\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\n\nimport {PlayerStructureMessage} from \"@orbitweb/common\";\nimport {StructureEntity} from \"../../model/StructureEntity\";\nimport {MovementGoalUseStructure} from \"../movement/MovementGoalUseStructure\";\n\n\nexport class ServerPlayerStructureMessage extends ServerMessageRecieved<PlayerStructureMessage> {\n\n  constructor(message: PlayerStructureMessage) {\n    super(message);\n  }\n\n  onRecieve(context: GameLogic) {\n    const player: SpaceshipEntity = context.getPlayer(this.message.source);\n\n    const structure: StructureEntity = context.structures.find ( (structure) => {\n      return structure.id === this.message.structureId;\n    });\n\n    if ( player !== undefined && structure !== undefined) {\n      player.movementGoal = new MovementGoalUseStructure(structure);\n    }\n  }\n}\n","import {MovementGoal} from \"../../model/MovementGoal\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\nimport {PhysicsInput} from \"@orbitweb/game-engine\";\nimport {MovementGoalFreeFly} from \"./MovementGoalFreeFly\";\n\nimport * as math from \"mathjs\";\n\nexport class MovementGoalAlignTo extends MovementGoal{\n  constructor(public reqAngle: number) {\n    super();\n  }\n\n\n  iterate(player: SpaceshipEntity, deltaTime: number): PhysicsInput {\n\n    let deltaAngle = player.rotation - this.reqAngle;\n\n    if ( this.isAligned(player, this.reqAngle)) {\n      player.movementGoal = new MovementGoalFreeFly();\n    }\n\n    deltaAngle = MovementGoalAlignTo.capOmega(deltaAngle, player.maxOmega, deltaTime);\n\n    return {\n      a: {\n        x: 1,\n        y: 0\n      },\n      r: deltaAngle,\n      vCap: 1\n    };\n  }\n\n  public static capOmega(angle: number, maxOmega: number, deltaTime: number): number {\n    let deltaAngle = angle;\n    if ( deltaAngle > Math.PI ) {\n\n    } else {\n      deltaAngle *= -1;\n    }\n\n    if (math.abs(deltaAngle) > maxOmega * deltaTime) {\n      deltaAngle = math.sign(deltaAngle) * maxOmega;\n    }\n\n    return deltaAngle;\n  }\n}\n","import {MovementGoal} from \"../../model/MovementGoal\";\nimport {PhysicsInput} from \"@orbitweb/game-engine\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\nimport {CMath} from \"@orbitweb/common\";\n\nexport class MovementGoalFreeFly extends MovementGoal{\n  constructor() {\n    super();\n  }\n\n\n  iterate(player: SpaceshipEntity, delta: number): PhysicsInput {\n\n    const dir = CMath.rotate({x: 0, y: 1}, player.rotation);\n\n    return {\n      r: 0,\n      a: {\n        x: dir.x * player.acceleration,\n        y: dir.y * player.acceleration\n      },\n      vCap: 1\n    }\n\n  }\n}\n","import {MovementGoal} from \"../../model/MovementGoal\";\nimport {PhysicsInput} from \"@orbitweb/game-engine\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\nimport {CMath} from \"@orbitweb/common\";\n\nexport class MovementGoalIdle extends MovementGoal{\n  constructor() {\n    super();\n  }\n\n\n  iterate(player: SpaceshipEntity, delta: number): PhysicsInput {\n\n    const dir = CMath.rotate({x: 0, y: 1}, player.rotation);\n\n    return {\n      r: 0,\n      a: {\n        x: 0,\n        y: 0\n      },\n      vCap: 1\n    }\n\n  }\n}\n","import {MovementGoal} from \"../../model/MovementGoal\";\nimport {PhysicsInput} from \"@orbitweb/game-engine\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\nimport {CMath} from \"@orbitweb/common\";\nimport {StructureEntity} from \"../../model/StructureEntity\";\nimport {MovementGoalAlignTo} from \"./MovementGoalAlignTo\";\nimport {MovementGoalIdle} from \"./MovementGoalIdle\";\nimport {Vector2} from \"@orbitweb/common\";\n\nexport class MovementGoalUseStructure extends MovementGoal{\n\n  public acivationTime: number = 0;\n\n  constructor(public structure: StructureEntity) {\n    super();\n  }\n\n\n  iterate(player: SpaceshipEntity, delta: number): PhysicsInput {\n\n    if ( this.structure === undefined){\n      console.error(\"structure is already dead\", this.structure);\n      return undefined;\n\n      /*\n      player.movementGoal = new MovementGoalIdle();\n      return player.movementGoal.iterate(player, delta);\n       */\n    }\n\n    const viewDir = CMath.rotate({x: 0, y: 1}, player.rotation);\n\n    // Distance Check\n\n    const distanceToTarget = CMath.len(CMath.sub(player.position, this.structure.position));\n\n    if ( distanceToTarget < this.structure.activationRange) {\n      //console.log(\"ticking\");\n      this.acivationTime += delta;\n    } else {\n      this.acivationTime -= delta;\n      this.acivationTime = this.acivationTime > 0 ? this.acivationTime : 0;\n    }\n\n    player.activationProgress = this.acivationTime / this.structure.activationDuration;\n\n    // Activation Time Check\n\n    if ( this.acivationTime > this.structure.activationDuration) {\n      this.structure.onActivateStructure(player);\n      player.movementGoal = new MovementGoalIdle();\n      return player.movementGoal.iterate(player, delta);\n    }\n\n    const targetDir =  CMath.sub(this.structure.position, player.position);\n\n    const reqAngle = CMath.angle(targetDir, {x: 0, y:1});\n    const deltaAngle = player.rotation - reqAngle;\n    const cappedAngle = MovementGoalAlignTo.capOmega(deltaAngle, player.maxOmega, delta);\n\n\n\n\n    let bremsweg = (player.curSpeed * player.curSpeed) / ( 2 * player.acceleration);\n\n    if ( distanceToTarget < this.structure.activationRange) {\n      const curSpeed = player.curSpeed;\n\n      let bremskraft: Vector2 = {\n        x: 0,\n        y: 0\n      };\n      if (curSpeed > 0) {\n        bremskraft = {\n          x: -1 * player.speed.x / player.curSpeed,\n          y: -1 * player.speed.y / player.curSpeed\n        }\n      }\n\n      const f = curSpeed  / player.maxSpeed;\n\n      let a = {\n        x: (0 + f) * bremskraft.x * player.acceleration,\n        y: (0 + f) * bremskraft.y * player.acceleration\n      };\n\n      return {\n        r: cappedAngle,\n        a: a,\n        vCap: 1\n      };\n    } else if ( distanceToTarget > bremsweg) {\n      return {\n        r: cappedAngle,\n        a: {\n          x: viewDir.x * player.acceleration,\n          y: viewDir.y * player.acceleration\n        },\n        vCap: 1\n      }\n\n    }\n    let vCap = distanceToTarget / bremsweg;\n    vCap = vCap > 0 ? vCap : 0;\n    vCap = vCap <= 1 ? vCap : 1;\n\n    const curSpeed = player.curSpeed;\n\n    let bremskraft: Vector2 = {\n      x: 0,\n      y: 0\n    };\n    if (curSpeed > 0) {\n      bremskraft = {\n        x: -1 * player.speed.x / player.curSpeed,\n        y: -1 * player.speed.y / player.curSpeed\n      }\n    }\n\n    const f = curSpeed  / player.maxSpeed;\n\n    let a = {\n      x: (0 + f) * bremskraft.x * player.acceleration,\n      y: (0 + f) * bremskraft.y * player.acceleration\n    };\n\n    return {\n      r: cappedAngle,\n      a: a,\n      vCap: 1\n    };\n  }\n}\n","import {ProjectileEntity} from \"../../model/ProjectileEntity\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\nimport {Physics} from \"@orbitweb/common\";\nimport {Vector2} from \"@orbitweb/common\";\nimport {CMath} from \"@orbitweb/common\";\nimport {Particle} from \"@orbitweb/common\";\n\nexport class ProjectileRocket extends ProjectileEntity {\n\n\n  private minDistanceToExplode: number = 30.0;\n  private maxSpeed: number = 40;\n  private damage: number = 10;\n  private flightTime: number = 15;\n\n  constructor(id: string, source: SpaceshipEntity, target: SpaceshipEntity) {\n    super(id, source, target);\n    this.type = \"rocketProjectile\";\n    this.duration = 20;\n    this.timeToLife = this.flightTime;\n  }\n\n\n  onInit() {\n    super.onInit();\n\n    this.position.x = this.source.position.x;\n    this.position.y = this.source.position.y;\n\n  }\n\n  iterate(delta: number) {\n    super.iterate(delta);\n/*\n    this.speed.x = 10.0;\n    this.speed.y = 3.0;\n*/\n\n    const distVector = CMath.sub(this.target.position, this.position);\n\n    const len = CMath.len(distVector);\n\n    if ( len < this.minDistanceToExplode) {\n      this.target.health -= this.damage;\n      this.target.lastHitBy = this.source;\n      this.timeToLife = 0;\n      return;\n    }\n \n    const dir: Vector2 = CMath.normalize(distVector);\n\n   const orient: Vector2 = this.getOrientation(this);\n\n   const angle: number = CMath.angle(dir, {x: 1, y: 0});\n\n    this.rotation = angle;\n\n    this.speed = CMath.scale(dir, this.maxSpeed);\n\n    Physics.iterate(this, delta);\n  }\n\n  public getOrientation(particle: Particle): Vector2 {\n    return CMath.rotate({x: 1, y: 0}, particle.rotation);\n  }\n\n}\n","import {StructureEntity} from \"../../model/StructureEntity\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\nimport {Inventory} from \"@orbitweb/common\";\n\nexport class StructureLootEntity extends StructureEntity {\n  constructor(x: number, y: number, public inventory: Inventory[]) {\n    super(x, y);\n    this.type = \"Loot\";\n    this.activationRange = 20;\n  }\n\n\n  onActivateStructure(user: SpaceshipEntity) {\n    super.onActivateStructure(user);\n\n    user.inventory = this.inventory.reduce( (acc, cur) => {\n      let loot = acc.find( (l) => l.name === cur.name);\n\n      if (loot === undefined) {\n        loot = new Inventory(cur.name);\n        acc.push(loot);\n      }\n\n      loot.amount += cur.amount;\n\n      return acc;\n    }, user.inventory);\n\n    this.destroy = true;\n  }\n}\n","import {StructureEntity} from \"../../model/StructureEntity\";\nimport {SpaceshipEntity} from \"../../model/SpaceshipEntity\";\nimport {Scoreboard} from \"../../core/Scoreboard\";\n\nexport class StructurePortalEntity extends StructureEntity {\n  constructor(x: number, y: number, public scoreboard: Scoreboard) {\n    super(x, y);\n    this.type = \"Portal\";\n    this.activationRange = 30;\n    this.activationDuration = 30;\n    this.isStatic = true;\n  }\n\n\n  onActivateStructure(user: SpaceshipEntity) {\n    super.onActivateStructure(user);\n    user.lastHitBy = user;\n    user.health = 0;\n    user.silentRemove = true;\n\n    this.scoreboard.depositLoot(user.id, user.inventory);\n  }\n}\n","import {SpaceshipEntity} from \"./SpaceshipEntity\";\nimport {PhysicsInput} from \"@orbitweb/game-engine\";\nimport * as math from \"mathjs\";\nimport {MovementGoalFreeFly} from \"../entity/movement/MovementGoalFreeFly\";\n\nexport class MovementGoal {\n  constructor() {\n  }\n\n  protected isAligned(player: SpaceshipEntity, targetAngle: number): boolean {\n    let deltaAngle = player.rotation - targetAngle;\n\n    if ( math.abs(deltaAngle) < (5 * Math.PI / 180) || math.abs(deltaAngle) > (355 * Math.PI / 180)) {\n      player.movementGoal = new MovementGoalFreeFly();\n      return true;\n    }\n\n    return false;\n\n\n\n  }\n\n\n\n  public iterate(player: SpaceshipEntity, delta: number): PhysicsInput {\n    return {\n      a: {\n        x: 0,\n        y: 0\n      },\n      r:0,\n      vCap: 1\n    }\n  }\n}\n","import {Projectile} from \"@orbitweb/common\";\nimport {SpaceshipEntity} from \"./SpaceshipEntity\";\n\n\nexport class ProjectileEntity extends Projectile {\n\n  constructor(id: string, public source: SpaceshipEntity, public target: SpaceshipEntity) {\n    super(id, source.color);\n  }\n\n\n  iterate(delta: number) {\n    super.iterate(delta);\n  }\n}\n","import {GameLogic} from \"../GameLogic\";\nimport {Message} from \"@orbitweb/common\";\n\nexport class ServerMessageRecieved<T extends Message> {\n  constructor(public message: T) {\n  }\n\n  public onRecieve(context: GameLogic) {\n\n  }\n}\n","import {ShipEquipment} from \"@orbitweb/common\";\nimport {SpaceshipEntity} from \"./SpaceshipEntity\";\n\nexport class ShipEquipmentEntity extends ShipEquipment {\n\n  protected alreadyApplied: boolean = false;\n  protected alreadyRemoved: boolean = false;\n\n\n  constructor(shipEquipment: ShipEquipment) {\n    super(shipEquipment.name, shipEquipment.tier, shipEquipment.cpuCost, shipEquipment.powerCost, shipEquipment.cycleTime, shipEquipment.passive, shipEquipment.action);\n  }\n\n  iterate(parent: SpaceshipEntity, delta: number) {\n    if ( this.passive )\n      return;\n\n    super.iterate(parent, delta);\n\n    if (this.isOnCooldown())\n      return;\n\n    if ( this.state.active === false && this.state.pendingState === false) {\n      return;\n    }\n\n//    this.state.active = this.state.pendingState;\n\n    this.onUpdateEquipment(parent, delta);\n\n  }\n\n\n\n  protected onStartEquipment(parent: SpaceshipEntity) {\n    this.state.active = true;\n  }\n\n  protected onUpdateEquipment(parent: SpaceshipEntity, delta: number) {\n    if ( this.state.active === false && this.state.pendingState === true) {\n      if (!this.canAfford(parent, delta)) {\n        return;\n      }\n      this.payPower(parent);\n      this.onStartEquipment(parent);\n    } else if ( this.state.active === true && this.state.pendingState === false) {\n      this.onEndEquipment(parent);\n    } else if ( this.state.active === true && this.state.pendingState === true) {\n      this.onEndEquipment(parent);\n\n      if (!this.canAfford(parent, delta)) {\n        return;\n      }\n\n      this.payPower(parent);\n      this.onStartEquipment(parent)\n    }\n/*\n    if (this.state.active && !this.alreadyApplied) {\n      if (!this.canAfford(parent, delta)) {\n        this.state.active = false;\n        this.state.pendingState = false;\n        return;\n      }\n\n      // First start\n\n      this.alreadyApplied = true;\n      this.alreadyRemoved = false;\n\n      //this.payPower(parent);\n      //this.remainingTime = this.cycleTime;\n      this.onStartEquipment(parent);\n    } else if ( this.state.active && this.alreadyApplied) {\n      // Reapply\n\n      this.onEndEquipment(parent);\n\n      if (!this.canAfford(parent, delta)) {\n        this.state.active = false;\n        this.state.pendingState = false;\n        return;\n      }\n\n      this.alreadyRemoved = false;\n\n      //this.payPower(parent);\n      //this.remainingTime = this.cycleTime;\n      this.onStartEquipment(parent);\n\n    } else if ( !this.state.active) {\n      this.alreadyRemoved = true;\n      this.alreadyApplied = false;\n      this.onEndEquipment(parent);\n    }\n\n */\n  }\n\n  protected onEndEquipment(parent: SpaceshipEntity) {\n    this.state.active = false;\n  }\n\n  protected payPower(parent: SpaceshipEntity) {\n    parent.power -= this.powerCost;\n    this.remainingTime = this.cycleTime;\n  }\n\n  protected canAfford(parent: SpaceshipEntity, delta: number): boolean {\n    const price = this.powerCost;\n\n    return parent.power >= price;\n\n  }\n\n  protected isOnCooldown(): boolean {\n    return this.remainingTime > 0;\n  }\n\n  onDestroy(parent: SpaceshipEntity) {\n    super.onDestroy(parent);\n\n    if ( this.state.active) {\n      this.onEndEquipment(parent);\n    }\n\n  }\n}\n","import {ShipEquipmentEntity} from \"./ShipEquipmentEntity\";\nimport {ShipEquipment} from \"@orbitweb/common\";\nimport {SpaceshipEntity} from \"./SpaceshipEntity\";\nimport {CMath} from \"@orbitweb/common\";\n\nexport class ShipEquipmentTargetEntity extends ShipEquipmentEntity{\n\n  public range: number = 180;\n\n  public wasInRange: boolean = false;\n\n  public wasOutOfRange: boolean = false;\n\n  constructor(shipEquipment: ShipEquipment) {\n    super(shipEquipment);\n  }\n\n\n  iterate(parent: SpaceshipEntity, delta: number) {\n    super.iterate(parent, delta);\n  }\n\n  protected onStartEquipment(parent: SpaceshipEntity) {\n    super.onStartEquipment(parent);\n  }\n\n  protected onUpdateEquipment(parent: SpaceshipEntity, delta: number) {\n    if ( !this.hasTarget(parent) ) {\n      this.state.pendingState = false;\n      super.onUpdateEquipment(parent, delta);\n      return;\n    }\n\n    if ( this.state.pendingState === true && !this.isTargetInRange(parent)) {\n      if ( this.state.active)\n        this.onEndEquipment(parent);\n    } else {\n      super.onUpdateEquipment(parent, delta);\n    }\n\n\n  }\n\n\n\n  protected hasTarget(parent: SpaceshipEntity): boolean {\n    return parent.targetPlayer !== undefined;\n  }\n\n  protected isTargetInRange(parent: SpaceshipEntity): boolean {\n    const len = CMath.len(CMath.sub(parent.position, parent.targetPlayer.position));\n    return len < this.range;\n  }\n\n\n}\n","import {Spaceship} from \"@orbitweb/common\";\nimport {IPhysics} from \"@orbitweb/game-engine\";\nimport {HybridPhysics} from \"@orbitweb/game-engine\";\nimport {ShipEquipmentEntity} from \"./ShipEquipmentEntity\";\nimport {CMath} from \"@orbitweb/common\";\nimport {StructureEntity} from \"./StructureEntity\";\nimport {MovementGoalFreeFly} from \"../entity/movement/MovementGoalFreeFly\";\nimport {MovementGoal} from \"./MovementGoal\";\n\nexport class SpaceshipEntity extends Spaceship {\n\n  private physics: IPhysics;\n\n  \n\n  public lastHitBy: SpaceshipEntity;\n\n  public activationTime: number = 0;\n\n  public silentRemove: boolean = false;\n\n  private minorGoal: number;\n  private majorGoal: number;\n\n  public movementGoal: MovementGoal;\n\n  public get curSpeed(): number {\n    return CMath.len(this.speed);\n  }\n\n\n  constructor(spaceship: Spaceship) {\n    super(spaceship.id, spaceship.color);\n\n    this.movementGoal = new MovementGoalFreeFly();\n\n    this.physics = new HybridPhysics();\n  }\n\n  public iterate(delta: number) {\n    //this.physics.iterate(this, delta);\n    this.activationProgress = 0;\n    const input = this.movementGoal.iterate(this, delta);\n\n    this.accel = input.a;\n    this.omega = input.r;\n\n\n\n    if ( this.curSpeed > input.vCap * this.maxSpeed) {\n      this.speed.x = this.speed.x * input.vCap * this.maxSpeed / this.curSpeed;\n      this.speed.y = this.speed.y * input.vCap * this.maxSpeed / this.curSpeed;\n    }\n\n\n    this.iterateStructure(delta);\n\n    this.power += this.energyRechargeRate * delta;\n\n    this.power = this.power <= this.energyCapacity ? this.power : this.energyCapacity;\n\n    this.health = this.health <= this.maxHealth ? this.health : this.maxHealth;\n\n    this.fitting.fitting.forEach( (eq: ShipEquipmentEntity) => {\n      eq.iterate(this, delta);\n    });\n  }\n\n  private iterateStructure(delta: number) {\n    if (this.actionUseStructure === true) {\n\n      if ( this.targetStructure === undefined)\n        return;\n\n      const dir = CMath.sub(this.position, this.targetStructure.position);\n      if (CMath.len(dir) < this.targetStructure.activationRange) {\n        this.activationTime += delta;\n      } else {\n        this.activationTime = 0;\n      }\n\n\n      if ( this.activationTime > this.targetStructure.activationDuration) {\n        (<StructureEntity> this.targetStructure).onActivateStructure(this);\n      }\n\n    } else {\n      this.activationTime = 0;\n    }\n  }\n\n}\n","import {Structure} from \"@orbitweb/common\";\nimport {SpaceshipEntity} from \"./SpaceshipEntity\";\n\nexport class StructureEntity extends Structure {\n  public destroy: boolean = false;\n\n  constructor(x: number, y: number) {\n    super(x, y);\n  }\n\n  public onActivateStructure(user: SpaceshipEntity) {\n\n  }\n\n  public onDestroy() {\n\n  }\n}\n","import {ShipEquipmentEntity} from \"../model/ShipEquipmentEntity\";\nimport {ShipEquipment} from \"@orbitweb/common\";\n\n\nimport {EquipmentEntityLaser} from \"../entity/equipment/EquipmentEntityLaser\";\nimport {EquipmentEntitySpeedBooster} from \"../entity/equipment/EquipmentEntitySpeedBooster\";\nimport {EquipmentEntityRocketLauncher} from \"../entity/equipment/EquipmentEntityRocketLauncher\";\nimport {EquipmentEntityRepair} from \"../entity/equipment/EquipmentEntityRepair\";\nimport {EquipmentEntityWebber} from \"../entity/equipment/EquipmentEntityWebber\";\nimport {EquipmentEntityEmpty} from \"../entity/equipment/EquipmentEntityEmpty\";\nimport {EquipmentEntityBattery} from \"../entity/equipment/EquipmentEntityBattery\";\nimport {EquipmentEntityNosferatu} from \"../entity/equipment/EquipmentEntityNosferatu\";\nimport {EquipmentEntityMass} from \"../entity/equipment/EquipmentEntityMass\";\n\n\nexport class EquipmentDeserializer {\n  public static deserialize(shipEquipment: ShipEquipment): ShipEquipmentEntity {\n\n    if( shipEquipment === undefined || shipEquipment === null) {\n      return undefined;\n    }\n\n\n    switch (shipEquipment.name) {\n      case \"Empty\": return new EquipmentEntityEmpty(shipEquipment);\n      case \"Repair\": return new EquipmentEntityRepair(shipEquipment);\n      case \"Webber\": return new EquipmentEntityWebber(shipEquipment);\n      case \"Laser\": return new EquipmentEntityLaser(shipEquipment);\n      case \"Battery\": return new EquipmentEntityBattery(shipEquipment);\n      case \"SpeedBooster\": return new EquipmentEntitySpeedBooster(shipEquipment);\n      case \"Nosferatu\": return new EquipmentEntityNosferatu(shipEquipment);\n      case \"RocketLauncher\": return new EquipmentEntityRocketLauncher(shipEquipment);\n      case \"Mass\": return new EquipmentEntityMass(shipEquipment);\n    }\n    return undefined;\n  }\n}\n","import {PlayerJoinedMessage} from \"@orbitweb/common\";\nimport {PlayerMoveToMessage} from \"@orbitweb/common\";\nimport {PlayerOrbitMessage} from \"@orbitweb/common\";\nimport {PlayerActionMessage} from \"@orbitweb/common\";\nimport {PlayerSelfKillMessage} from \"@orbitweb/common\";\nimport {PlayerStructureMessage} from \"@orbitweb/common\";\nimport {ServerMessageRecieved} from \"../model/ServerMessageRecieved\";\nimport {Message} from \"@orbitweb/common\";\nimport {ServerPlayerJoinedMessage} from \"../entity/message/ServerPlayerJoinedMessage\";\nimport {ServerLobbyQueryMessage} from \"../entity/message/ServerLobbyQueryMessage\";\nimport {LobbyQueryMessage} from \"@orbitweb/common\";\nimport {ServerPlayerMoveToMessage} from \"../entity/message/ServerPlayerMoveToMessage\";\nimport {ServerPlayerOrbitMessage} from \"../entity/message/ServerPlayerOrbitMessage\";\nimport {ServerPlayerActionMessage} from \"../entity/message/ServerPlayerActionMessage\";\nimport {ServerPlayerSelfKillMessage} from \"../entity/message/ServerPlayerSelfKillMessage\";\nimport {ServerPlayerStructureMessage} from \"../entity/message/ServerPlayerStructureMessage\";\nimport {ServerDebugMessage} from \"../entity/message/ServerDebugMessage\";\n\n\nexport class MessageDeserializer {\n  public static deserialize(msg: Message): ServerMessageRecieved<any> {\n    switch (msg.type) {\n      case \"playerLoginMessage\":\n        return new ServerPlayerJoinedMessage(<PlayerJoinedMessage> msg);\n\n      case \"playerJoinedMessage\":\n        break;\n\n      case \"lobbyQueryMessage\":\n        return new ServerLobbyQueryMessage(<LobbyQueryMessage> msg);\n\n      case \"playerMoveToMessage\":\n        return new ServerPlayerMoveToMessage(<PlayerMoveToMessage> msg);\n\n      case \"playerOrbitMessage\":\n        return new ServerPlayerOrbitMessage(<PlayerOrbitMessage> msg);\n\n      case \"playerActionMessage\":\n        return new ServerPlayerActionMessage( <PlayerActionMessage> msg);\n\n      case \"playerSelfKillMessage\":\n        return new ServerPlayerSelfKillMessage( <PlayerSelfKillMessage> msg);\n        break;\n\n      case \"playerStructureMessage\":\n        return new ServerPlayerStructureMessage( <PlayerStructureMessage> msg);\n        break;\n\n      case \"debugMessage\":\n        return new ServerDebugMessage( msg );\n        break;\n\n      default:\n        console.log(\"unknown message\", msg);\n        break;\n    }\n  }\n}\n","module.exports = require(\"events\");","module.exports = require(\"express\");","module.exports = require(\"http\");","module.exports = require(\"mathjs\");","module.exports = require(\"node-gameloop\");","module.exports = require(\"socket.io\");","module.exports = require(\"tslib\");"],"sourceRoot":""}